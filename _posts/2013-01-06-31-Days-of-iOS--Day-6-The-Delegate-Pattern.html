---
layout: post
title: "31 Days of iOS: Day 6-The Delegate Pattern"
date: Sun Jan 06 2013 09:34:00
commentsOn: true
status: publish
type: post
published: true
categories: [Mobile, iOS, XCode, Objective-C]
excerpt: "This is day 6 in the 31 Days of iOS series.  In this article I walkthrough the delegation pattern and how to use it in an iOS application.  The delegation pattern is extremely common in iOS development so it's key to understand this concept."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,delegate,delegate pattern,pattern,delegation,How to develop iOS,iOS intro,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-06-31-Days-of-iOS--Day-6-The-Delegate-Pattern.html
disqus_identifier: 31-Days-of-iOS--Day-6–The-Delegate-Pattern
redirect_from:
  - /2013-01-06-31-Days-of-iOS--Day-6%E2%80%93The-Delegate-Pattern/
  - /2013-01-06-31-Days-of-iOS--Day-6–The-Delegate-Pattern/
  - /31-Days-of-iOS--Day-6–The-Delegate-Pattern/
  - /31-Days-of-iOS--Day-6–The-Delegate-Pattern
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 6 in the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; In <a title="Day 5: Programmatically showing view controllers" href="http://chrisrisner.com/31-Days-of-iOS--Day-5-Programmatically-showing-View-Controllers">yesterday’s article</a>, we showed a few different ways to programmatically display a second view controller in our app.&#160; Today we’re going to look at a very important concept when developing for iOS:&#160; the <a title="The Delegation Pattern" href="http://en.wikipedia.org/wiki/Delegation_pattern">Delegation pattern</a>.&#160; Using delegates is very common in Objective-C development.&#160; It can also be used in other programming languages, however, in Objective-C it’s very easy to see it in action due to the use of the keyword <strong>delegate</strong>.&#160; You can <a title="Day five app source code" href="http://chrisrisner.com/upload/DayFiveApp.zip">download the code we’re going to start with (from yesterday’s article) here</a>. If you’d like to follow along with the <a title="Day Six App Source Code" href="http://chrisrisner.com/upload/DaySixApp.zip">completed code, you can access it here</a>.</p>  <p><strong>The Delegate Pattern</strong></p>  <p>The idea behind delegates is that instead of class A executing some code, it tells it’s delegate to execute that code.&#160; The delegate is tied to another class (let’s call it class B).&#160; In order to facilitate this, class A creates something called a <strong>protocol</strong>.&#160; This <strong>protocol</strong> has a list of methods in it (with no definition).&#160; Class A then has an instance of the protocol as a property.&#160; Class B has to implement the <strong>protocol</strong> defined in class A.&#160; Lastly, when class A is created, it’s delegate property is set to class B.&#160; That may be a little confusing so we’ll look at some actual code for this next.</p>  <p><strong>Creating the Protocol and Delegate</strong></p>  <p>We’re going to add a<strong> protocol </strong>and <strong>delegate</strong> to the <strong>SecondViewController </strong>class:</p>  <p><script src="https://gist.github.com/3863413.js?file=SecondViewController.h"></script></p>  <p>Notice the <strong>@class</strong> line at the top.&#160;&#160; This is necessary for us to reference the <strong>SecondVieController</strong> class inside of our <strong>protocol</strong>.&#160; If you didn’t need to reference the class in the <strong>protocol</strong> (as a parameter like we are) then this <strong>@class</strong> line wouldn’t be necessary.&#160; </p>  <p><strong>Using the Delegate</strong></p>  <p>Flipping over to <strong>SecondViewController.m</strong>, we first need to synthesize the delegate object.&#160; Then we’re going to send the <strong>delegate</strong> the <strong>doSomething </strong>message when a button is tapped:</p>  <p><script src="https://gist.github.com/3863413.js?file=SecondViewController.m"></script></p>  <p>As of right now, the delegate hasn’t been set to anything. If you run your app and tap the associated button, it won’t error out.&#160; Nothing “bad” will happen.&#160; However, this obviously isn’t what we want.&#160; Let’s look next at how to connect the delegate to something.</p>  <p><strong>Implementing the Protocol</strong></p>  <p>The first step we have to do is open up the class we want to handle the action when the delegate is called.&#160; For this sample, we’re going to open <strong>ViewController.h</strong>.&#160; First you’ll need to import the <strong>SecondViewController.h </strong>file and make this class implement the <strong>SecondViewControllerDelegate </strong>protocol:</p>  <p><script src="https://gist.github.com/3863413.js?file=ViewController.h"></script></p>  <p>Those are the only changes needed to the .h file.&#160; Switching to the <strong>ViewController.m </strong>file, we need to make two changes.&#160; First, when we instantiate and show the <strong>SecondViewController</strong> class, we need to set it’s delegate property:</p>  <p><script src="https://gist.github.com/3863413.js?file=ViewController1.m"></script></p>  <p>The important line here is the one where <strong>.delegate</strong> is set to <strong>self</strong>.&#160; This tells <strong>SecondViewController</strong> that whenever a message it sent to it’s <strong>delegate</strong> property, it should be sent to the <strong>ViewController</strong> instance we’re in.&#160; Now we just need to implement the method from the <strong>protocol</strong>:</p>  <p><script src="https://gist.github.com/3863413.js?file=ViewController2.m"></script></p>  <p>In this case, we’re dismissing the modal.&#160; Note that this will only work when the second view is presented as a modal (by tapping the <strong>Show New View</strong> button).&#160; If you wanted to dismiss a view displayed on the <strong>NavigationController</strong>, you’d need to replace the call to <strong>dismissModalViewControllerAnimated</strong> with a call to <strong>self’s navigationController</strong> property’s <strong>popViewControllerAnimated</strong> method.</p>  <p><strong>Conclusion</strong></p>  <p>Today we took a look at the <strong>delegation pattern</strong> in Objective-C.&#160; You’ll find uses for this as you program your own classes, but you’ll also see places where you need to use this pattern to interact with the <strong>UIKit </strong>and the <strong>Foundation framework</strong>.&#160; For example, if you use the <strong>UIImagePickerController</strong> to allow the user to select a picture from the device’s gallery, you handle the call back by implementing the <strong>UIImagePickerControllerDelegate</strong>.&#160; You can <a title="Day Six App Source Code" href="http://chrisrisner.com/upload/DaySixApp.zip">download the final code from today here</a>.</p>