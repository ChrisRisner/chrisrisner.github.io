---
layout: post
title: "31 Days of iOS: Day 9-Handling Text Input"
date: Wed Jan 09 2013 05:40:58 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, iOS, XCode]
excerpt: "This is Day 9 in the 31 Days of iOS.  In this article we go over how to handle text editing events using UITextViews and UITextFields as well as delegates.  We'll talk about how to intercept key presses to validate and control input."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,text,handling text,handling input,UITextView,UITextField,UITextViewDelegate,text editing,text events,How to develop iOS,iOS intro,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-09-31-Days-of-iOS--Day-9-Handling-Text-Input.html
disqus_identifier: 31-Days-of-iOS--Day-9-Handling-Text-Input
---
<p align="left"><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 9 in the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; In the <a title="Day 8: Sending Post requests" href="http://chrisrisner.com/31-Days-of-iOS--Day-8%E2%80%93Performing-Posts-and-setting-request-type">preceding two articles</a> we looked at how to perform network requests.&#160; You should now have the knowhow to do any sort of HTTP requests your applications may need.&#160; Today, we’re going to create a brand new project and take a look at some more <strong>delegate</strong> operations.&#160; Specifically we’re going to examine how to override text input as the user types into a text field.&#160; This is useful for validation and restricting user input.&#160; If you’d like to follow along with the <a title="iOS Day 9 Source Code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDayNine.zip">completed code, you can access it here</a>.</p>  <p align="left"><strong>Creating our project and handling the UI</strong></p>  <p align="left">We’re going to start with a brand new project.&#160; Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application</strong> and name it <strong>DayNine</strong>:</p>  <p align="center"><img title="Day 9 New App" alt="Day 9 New App" src="https://crcomcstorage.blob.core.windows.net/images/31iosday9-new-app.jpg" width="450" height="276" /></p>  <p align="left">After that let’s handle the UI by opening <strong>MainStoryboard.storyboard</strong>.&#160; We’re going to drop two <strong>TextFields</strong>, a <strong>TextView</strong>, and a <strong>Round Rect Button</strong> onto our form. When you’re done, the view will look like this:</p>  <p align="center"><img title="iOS Day 9 UI" alt="iOS Day 9 UI" src="https://crcomcstorage.blob.core.windows.net/images/31iosday9-initial-ui.jpg" width="285" height="349" /></p>  <p align="left">Notice the highlighted area in the screenshot is the <strong>TextView</strong>.&#160; I left it highlighted so you could see it because it doesn’t have any borders by default.&#160; Open up the <strong>Assistant Editor</strong> in the <strong>Utilities </strong>pane on the right side of Xcode.&#160; We need to <strong>control + click and drag</strong> from each <strong>TextField</strong>, <strong>TextView</strong>, and <strong>Button</strong> over to the .h file and generate outlets.&#160; We also need to generate an action for the button.&#160; When you’re done with all of those, you’re .h file will look like this:</p>  <p align="left"><script src="https://gist.github.com/3944063.js?file=ViewController.h"></script></p>  <p align="left">Notice that we’ve also made <strong>ViewController</strong> implement both <strong>UITextFieldDelegate</strong> and <strong>UITextViewDelegate</strong>, we’ll go over why right now.&#160; Return to the storyboard and <strong>control + click and drag</strong> from each <strong>TextField</strong> and the <strong>TextView</strong> to the <strong>ViewController</strong> object beneath it:</p>  <p align="center"><img src="https://crcomcstorage.blob.core.windows.net/images/31iosday9-connecting-ui-part-two.jpg" width="244" height="489" /></p>  <p align="left">When you let go, you’ll get a dialog menu that let’s you choose the <strong>delegate</strong> for each element.&#160; By selecting the <strong>ViewController</strong> as the <strong>delegate</strong> for the <strong>TextFields</strong> and the <strong>TextView</strong>, we’re saying that any delegate methods that those elements call will be handled by our <strong>ViewController</strong>.&#160; This is why we had to make <strong>ViewController</strong> implement <strong>UITextFieldDelegate</strong> and <strong>UITextViewDelegate</strong>.&#160; Now that we’ve finished the UI for now, let’s switch over to coding.</p>  <p align="left"><strong>Coding the backend</strong></p>  <p align="left">Open up <strong>ViewController.m</strong> first.&#160; Both the <strong>UITextFieldDelegate </strong>and <strong>UITextViewDelegate</strong> protocols have several methods we can implement to override behavior on the UI elements.&#160; We’ll go through a few different scenarios to see what we can do.&#160; First, we’ll look at editing a text field’s text value when the user enters it for editing:</p>  <p align="left"><script src="https://gist.github.com/3944063.js?file=ViewControllerDidBeginEditing.m"></script></p>  <p align="left">In this situation, we’ll implement the <strong>textFieldDidBeginEditing</strong> method.&#160; This method will be called as soon as the user taps into a text field (or progresses into one).&#160; Here we’re checking to see if the text field that triggered it was <strong>textFieldOne</strong>.&#160; If it was, we set the field’s text property to “Don’t edit me!”.&#160; This method also exists on the <strong>TextView</strong> (though with the name changed to <strong>textView…</strong>).&#160; Another method we can implement is <strong>textFieldShouldBeginEditing</strong>:</p>  <p align="left"><script src="https://gist.github.com/3944063.js?file=ViewControllerShouldBeginEdit.m"></script></p>  <p align="left">This method expects a BOOL to be returned which indicates whether or not the field can be edited.&#160; Here we’re checking to see if the field to trigger it was <strong>textFieldTwo</strong> and if so, if it’s text property is “No Change”.&#160; If it is, then you won’t be able to edit the field.&#160; Again this method also exists on the <strong>TextView</strong>.&#160; Two other methods that exist are <strong>textFieldShouldEndEditing </strong>and <strong>textFieldDidEndEditing</strong>.&#160; These methods are very similar.&#160; The second (<strong>DidEnd</strong>) allows you to make changes when a user is finished editing a field.&#160; The first (<strong>ShouldEnd</strong>) allows you to prevent a user from ending their editing of a field.&#160; So for example, if you didn’t want the user to leave a field if the data they had entered was invalid, you could do so like this:</p>  <p align="left"><script src="https://gist.github.com/3944063.js?file=shouldendediting.m"></script></p>  <p align="left">Here we’re checking to see if the text entered is equal to “done” and if so, we won’t allow the user to stop editing the <strong>TextField</strong>.&#160; This can be a dangerous method to implement because you run the risk of trapping a user in editing mode.&#160; Unless you’re confident they’ll be able to figure out why you’re preventing them from leaving the text field, it may be best to avoid this.</p>  <p><strong>Handling input as it’s entered</strong></p>  <p>The previous scenarios are good to be aware of, however, one of the most common desires is to be able to check and control a text field (or view’s) text value as it’s edited (as opposed to when it starts or ends being edited).&#160; Thankfully, both <strong>TextFields</strong> and <strong>TextViews</strong> have a method for this: <strong>shouldChangeCharactersInRange</strong>.&#160; Let’s look at this in action:</p>  <p><script src="https://gist.github.com/3944063.js?file=shouldChangeText.m"></script></p>  <p>This time we’re checking for the <strong>TextView</strong>.&#160; In this case, we’re making sure the <strong>TextView</strong> doesn’t allow more than 45 characters.&#160; This is very useful if you need to limit the amount of text that can be entered to match character limits in your data storage (i.e. if you’re going to save your data to a database and the field can only be 45 characters, this is how you can accomplish that).&#160; This method gives you the ability to validate input as it is entered.&#160; If for example, you’re expecting a phone number or an email address, you could validate the input against a regular expression each time the text is changed and set the <strong>TextField/TextView</strong>’s background color to red if it doesn’t pass to indicate a bad value.</p>  <p><strong>Other methods</strong></p>  <p>There are a couple other methods worth explaining.&#160; <strong>textFieldShouldReturn</strong> is called whenever the return key is hit on the keyboard and the user is in a <strong>TextField</strong>.&#160; <strong>textFieldShouldClear</strong> is called if the <strong>TextField</strong> has a clear button and the user presses it.&#160; <strong>textViewDidChange</strong> is called whenever your <strong>TextView </strong>is altered.&#160; <strong>textViewDidChangeSelection</strong> is called when the selection (the text area highlighted) is altered.&#160; </p>  <p><strong>Conclusion</strong></p>  <p>You should now know everything you need to to validate user input as it happens.&#160; You’ll have to decide what action to take when a user’s input isn’t valid though.&#160; Remember that when you do this, it’s important that the user understands what’s going on.&#160; If you’re checking to make sure a phone number or email address is valid while it’s being typed in (as mentioned above) the user would probably understand if the <strong>TextField</strong> turns red.&#160; However, if the field isn’t properly labeled as being for a phone number or email address so the user understands that, they may be lost and confused by your app.&#160; If you’d like to look at the <a title="iOS day 9 code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDayNine.zip">final code from today, you can download it here</a>.</p>