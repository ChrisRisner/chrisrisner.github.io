---
layout: post
title: "31 Days of Android: Day 31–Putting your Apps in the Marketplace"
date: Wed Dec 21 2011 02:42:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Android, Google, Java, Mobile, Phone, Programming]
excerpt: "This is another tutorial in the 31 Days of Android series.  Today we'll finish the 31 Days of Android by talking about getting your apps into the Marketplace."
logoUrl: null
keywords: Android,31 days of Android,Google,Google Android,Android Intro,How to develop for android,Marketplace,deploying to the marketplace,cleaning your app,making a private key,creating an apk,creating a developer profile,getting featured,tutorial
filepath: 2011-12-21-31-Days-of-Android--Day-31–Putting-your-Apps-in-the-Marketplace.html
disqus_identifier: 31-Days-of-Android--Day-31–Putting-your-Apps-in-the-Marketplace
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/android_day_thirty_sad.png" />Sadly, we’ve come to the end of the <a title="31 Days of Android" href="http://chrisrisner.com/31-Days-of-Android">31 Days of Android</a>.&#160; If you’ve been paying attention so far, you should be capable of making some fairly sophisticated applications.&#160; Now it’s finally time to take the roast out of the oven and move your apps into the <strong>Android Marketplace</strong>.&#160; You certainly don’t have to do this.&#160; Due to Android’s loose restrictions on installing new app’s, you could distribute your app yourself or even use one of the competing app stores.&#160; To my knowledge though, the <strong>Android Marketplace</strong> is the best place to put your applications and the one app store most highly used among Android owners.&#160; There isn’t any sample code today as there isn’t anything you need to add on the code side once your application is ready, though there are some things you may need to change.</p>  <p>&#160;</p>  <p><strong>Cleaning your Project and Building for Release</strong></p>  <p>The first thing you should do is turn remove any calls to <strong>Log</strong> as well as turning off debugging.&#160; Debugging can be turned off in your manifest file by either removing the <strong>android:debuggable </strong>attribute or setting it to false.&#160; Any debug calls to <strong>startMethodTracing</strong> or <strong>stopMethodTracing</strong> should also be remove.&#160; Next, make sure that you’re not including any unnecessary files.&#160; These may be class files inside <strong>src </strong>that you used at one point and aren’t anymore, drawables or layouts in the <strong>res</strong> folder that aren’t needed, or jars in the <strong>lib</strong> folder that you’re not including.&#160; If you include them in your release, it will increase the size of your installable unnecessarily.&#160; Lastly, make sure your manifest file only specifies permissions your app actually needs.&#160; Some users are picky about what their apps can do and if you leave in permissions that don’t make sense for your app, you may lose out on installs.&#160; If you are using external resources (i.e. web services, web sites, databases, etc) you may also want to make sure you’re using the correct production resources.</p>  <p>&#160;</p>  <p><strong>Making a Private Key</strong></p>  <p>In order to send your application to the <strong>Marketplace</strong> it needs to be signed by a private key.&#160; Furthermore, whenever you want to make updates to your application in the <strong>Marketplace</strong>, it NEEDS to be signed by the same private key.&#160; If you lose your private key, you lose your ability to update your app.&#160; This is critical to remember.&#160; After you follow the steps below to create a private key, copy it to a usb drive, and put that drive in a safe, inside of a firerpoof safe, in a bank vault.&#160; </p>  <p><strong>keytool</strong> is an executable available in the JDK that is used to generate a private key.&#160; On my windows computer, this is located at <strong>c:\program files (x86)\Java\jdk1.6.0_25\bin\keytool.exe</strong>.&#160;&#160; The command to create your key is as follows:</p>  <blockquote>   <p>keytool –genkey –v –keystore my-app-release-key.keystore –alias my_alias –keyalg RSA –keysize 2048 –validity 10000</p> </blockquote>  <p>This will generate a key that is 2048 bits and will last for 10,000 days (27 years) using the RSA algorithm.&#160; Once you’ve ran that, you’ll be asked to enter a keystore password.&#160; It is highly advised that you use a strong password here.&#160; You’ll also be asked for your name, organization, department, city, state, and country code.&#160; When that is done, you’ll be prompted to enter a password for the alias.&#160; It’s again advised that you use a strong password here.&#160; If you run this command FROM the JDK directory, you may get an “<strong>Access is denied</strong>” error.&#160; The solution is to either run it from another directory or put a path in your command to another directory for the .keystore.&#160; Here, I’ve created the keystore in a directory named Java on the C drive:</p>  <blockquote>   <p>keytool –genkey –v –keystore c:\Java\my-app-release-key.keystore –alias my_alias –keyalg RSA –keysize 2048 –validity 10000</p> </blockquote>  <p><strong>Building an APK in Eclipse</strong></p>  <p>Now that you’ve generated your key and cleaned your application, you’re ready to produce a signed.&#160; Open your project in Eclipse and right click on the project in the <strong>Package Explorer</strong>.&#160; Under <strong>Android Tools</strong> select <strong>Export Signed Application Package</strong>:</p>  <p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="export signed application package" alt="export signed application package" src="http://chrisrisner.com/upload/android_day_thirtyone_export_app_package.png" width="437" height="447" /></p>  <p>In the next window, the project should already be entered.&#160; Click <strong>Next</strong> and you’ll then need to browse to the location of your <strong>keystore</strong> file and enter your keystore password.&#160; Then you need to select the alias you created and enter the password you set for that.&#160; Lastly, you’ll need to enter a <strong>Destination APK file</strong>.&#160; This won’t require you to put “<strong>.apk</strong>” at the end of your file but make sure you do:</p>  <p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Name your APK file" alt="Name your APK file" src="http://chrisrisner.com/upload/andorid_day_thirtyone_name_apk.png" width="424" height="147" /></p>  <p>&#160;</p>  <p>After a moment the window should close and you should see your .apk file in the directory you chose.&#160;&#160; Congrats, you’re done in Eclipse (until your next update).</p>  <p>&#160;</p>  <p><strong>Creating an Android Market Publisher Account</strong></p>  <p>Before you can add any applications to the <strong>Android Marketplace</strong>, you <a title="Android Market Developer Profile" href="http://market.android.com/publish">need to create a developer profile and pay the registration fee</a>.&#160; The developer profile determines how you appear in the market and allowes you to enter a name, email address, web site, and phone number.&#160; The registration fee is a one time $25.00 fee that is paid using Google Checkout.&#160; When that is done and you’ve agreed to the terms of service, you should be presented with an “<strong>Upload Application</strong>” button.&#160; Tap that to continue on with the process.&#160; </p>  <p>&#160;</p>  <p><strong>Uploading and Setting Up your Application</strong></p>  <p>Immediately after hitting “<strong>Upload Application</strong>” you’ll need to pick and upload the .apk.&#160; This is required as the first step in adding your application.&#160; Once you’ve selected it, you’ll get a summary of the package name, app name, version name and code, as well as the permissions and features listed in the manifest:</p>  <p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Upload new APK" alt="Upload new APK" src="http://chrisrisner.com/upload/android_day_thirtyone_upload_apk.png" width="477" height="282" /></p>  <p>Provided you’re happy, hit Save.&#160; Next, you’ll be able to upload assets and specify listing details.&#160; Some of this is required and MUST be added before you can save.&#160; These required things include:&#160; Screenshots, a High Resolution Application Icon, a Title, a Description, a Category, and a Content Rating.&#160; If you’re just trying to get your app into the <strong>Marketplace</strong> and you don’t care about getting featured or presenting your app as being professional, go ahead and just fill out the info so you can get to the Save point.&#160; If you do desire to have your app be featured and you want people to get to your app in the <strong>Marketplace</strong>, pay a lot of attention to what you use for images and make sure they are in the correct format.&#160; Furthermore, don’t treat the optional images and promotional video as optional.&#160; <a title="Getting Featured in the Marketplace" href="http://android-developers.blogspot.com/2011/10/android-market-featured-image.html">Google really looks at these things when deciding what applications to feature</a>.</p>  <p>&#160;</p>  <p><strong>Saving your Package Name and Publishing</strong></p>  <p>Once you’ve filled out the necessary details you can <strong>Save</strong> your application.&#160; Once you’ve done that, you now reserve the package name and no one else can use it.&#160; This means that you own that package name (unless Google decides you’ve violated their terms of service and erases you from history).&#160; No one else can use it and only you can update it and you can only update it with APKs signed by the same private key you created earlier (again, its very important that you don’t lose your private key file).&#160; You aren’t required to publish your app right away so if you’re concerned with reserving the package name, fill out this form early on with dummy data and a dummy .apk.&#160; Once you’re happy with everything, you can <strong>Publish</strong> your app.&#160; </p>  <p>Once you’ve published it will take a few minutes for your app to show up on the <strong>Marketplace</strong> and a good deal longer for the app to show up when searching for it (I presume it has to propagate to a lot of servers).&#160; In the mean time, you should be able to access your app and send people to it with a URL that looks like this <a title="https://market.android.com/details?id=com.restaurantweek.activities" href="https://market.android.com/details?id=com.package.name">https://market.android.com/details?id=com.package.name</a>.</p>  <p>&#160;</p>  <p><strong>Updating your Application</strong></p>  <p>Now that you’ve published your application, let’s talk about how to update it.&#160; Once you have a new version of your .apk (make sure you’ve updated the <strong>VersionCode</strong> and <strong>VersionName</strong> in your manifest file) and <a title="Android Developer Portal" href="https://market.android.com/publish">log into the developer portal</a>.&#160; You should see a list of all your applications.&#160; Click on the name of the application you want to upload (it should appear as a hyperlink).&#160; The first page you will see is a <strong>Product Details</strong> page that has all of the screenshots and app details on it.&#160; At the top of the page are two tabs for <strong>Product Details</strong> and <strong>APK files</strong>.&#160; Clicking on <strong>APK files</strong> will show you the current and active version of your app.&#160; Beneath that should be a button to <strong>Upload APK</strong>.&#160; After clicking that and uploading, you should now see the new version beneath the active one.&#160; To the right of that there should be a link to <strong>Activate </strong>your new apk.&#160; Once you’ve uploaded, it’s VERY important that you click the <strong>Save</strong> button at the top right of the page.&#160; If you don’t, your new apk will not be published.</p>  <p>&#160;</p>  <p>Congratulations, you’re finally ready to start putting your applications out for people to use.&#160; Good night, and good luck.</p>