---
layout: post
title: "Debugging with Runscope"
date: Wed Sep 04 2013 11:09:00
commentsOn: true
status: publish
type: post
published: true
categories: [Mobile Services, Web]
excerpt: "This post talks about how you can use the Runscope tool to help debug your web requests whether it's from a mobile application or anything else.  Runscope acts as a middle layer that all of your requests go through before being passed to your endpoint.  This allows you to review all requests and responses made to your service."
logoUrl: null
keywords: Runscope,Mobile Services,Azure,Proxy,request,intercept,debug
filepath: 2013-09-04-Debugging-with-Runscope.html
disqus_identifier: Debugging-with-Runscope
---
<p><img style="float: right; margin: 0px 0px 5px 5px; display: inline" align="right" src="http://storage.chrisrisner.com/images/runscope-full-logo-big.png" width="286" height="56" />Recently I’ve been using a really great tool to debug some different issues I was having with a <a title="Windows Azure Mobile Services" href="http://www.windowsazure.com/mobile">Mobile Services</a> project I’ve been working on.&#160; The specific scenario I had was that I was sending data up to my Mobile Service but it didn’t seem like what I thought I was sending was getting there.&#160; In the past, when developers run into this problem they have turned to tools like Charles or Fiddler.&#160; Today I’ll explain what those are and then introduce you to a new alternative called Runscope.&#160; Just a quick note, I don’t work for Runscope, they aren’t paying me, I don’t have stock in them, they aren’t run by my father’s brother’s nephew’s cousin’s former roommate or anything like that.&#160; They just make a good product. </p>  <p><strong>Hi Charles, I’m Fiddler</strong></p>  <p>Charles and Fiddler are both program you run on your local computer (Charles is cross-plat while Fiddler is Windows only AFAIK).&#160; Both of these programs function as a sort of proxy where all of your web traffic is routed through the application (Charles or Fiddler).&#160; You can then get some really great information about what is going across the wire and what is coming back.&#160; You can even get this to work for HTTPS traffic though not without a bit of a headache (or a lot depending on how you look at it for Android and iOS testing).&#160; If you’re doing a lot of mobile development, one of the biggest issues with using Charles or Fiddler is that you can’t really use it if you’re testing something on a device.&#160; Sure, you could share Wi-Fi from your network connected computer and then connect from the device to the computer and….ok that sounds absolutely terrible.&#160; Thankfully, today I’m going to tell you about a tool that let’s you forget all about these HTTPS and “only on my computer” problems: Runscope.</p>  <p><strong>Runscope</strong></p>  <p><a title="Runscope" href="http://runscope.com">Runscope</a> is a web based application that acts similar to a proxy but is much more powerful than just something that that.&#160; At it’s most simplest, you set up a bucket which corresponds to a specific URL (the URL of your server side component).&#160; Runscope then gives you a custom URL to their API.&#160; In your application, you make your requests to Runscope’s custom URL.&#160; Runscope then passes that request through to your server side component and then returns to your application whatever response they get back from your server.&#160; That’s all the work you have to do to get started with Runscope.&#160; From there, you just log in to your account and you can see all of the request and response details for everything that goes through Runscope.&#160; It doesn’t matter if you’re making your request from a normal computer, a browser, a mobile application, an arduino, or anything else.&#160; Since HTTPS works out of the box, there is no special configuration you need to do on a mobile device or certificates you need to install.&#160; I know, that sounds crazy simple.&#160; Let’s go ahead and walk through setting this up.&#160; </p>  <p><strong>Setting up a Bucket</strong></p>  <p>To get started, the first thing you’ll want to do is go to <a href="http://www.runscope.com">http://www.runscope.com</a>.&#160; From there, you should see a <strong>Sign Up </strong>button near the top right.&#160; Here you’ll be asked for your name, company or organization, email address, and password.&#160; You’ll automatically be signed up for a trial of the Team Plan once you click <strong>Create Account</strong> (we’ll talk more about the different plans later).&#160; You’ll next be treated to a little walkthrough of how things work.&#160;&#160; The second step in the walkthrough actually allows you to pick a endpoint and then see a sample request and response against them.&#160; After trying it out, you’ll also be shown some of the things you can do after you’ve tracked a request/response including editing and retrying, sharing with other people, retrying, and comparing.&#160; Lastly we land at our dashboard.&#160; Here we can add a new bucket by clicking the <strong>Add Bucket</strong> link in the bottom left.&#160; For today’s example, I’m going to demonstrate using Runscope to track requests made to a Mobile Service I have.&#160; If you haven’t <a title="Mobile Services Stuff" href="http://chrisrisner.com/Common-Scenarios-with-Windows-Azure-Mobile-Services">checked out Mobile Services before, I’d highly recommend doing so</a>.&#160; In short, Mobile Services is a backend-as-a-service powered by Windows Azure with client SDKs for Android, iOS, .NET, and HTML/JS.&#160; One of the things Mobile Services does is expose REST APIs for any data tables you create.&#160; We’ll look at this today by using the quick start application for Mobile Services.&#160; For today, I’ve created a new Mobile Service named <strong>RunscopeTest</strong>.&#160; I’ve also downloaded the quick start for that Mobile Service for iOS.&#160; If you’re testing with Mobile Services, you could easily do the same with any of the supported platforms.</p>  <p>Once I’ve created my Mobile Service, I can see that the URL for it is <a title="https://runscopetest.azure-mobile.net/" href="https://runscopetest.azure-mobile.net/">https://runscopetest.azure-mobile.net/</a>.&#160; Let’s go back to the Runscope portal and click the <strong>Add Bucket</strong> line.&#160; We then name our bucket (I’ll use <strong>RunscopeTest</strong> here as well).&#160; At the next screen, I’m told how to make requests and given the ability to enter my service’s URL:</p>  <p align="center"><img title="Runscope make requests" alt="Runscope make requests" src="http://storage.chrisrisner.com/images/runscope-make-requests.jpg" /></p>  <p><strong>Changing the client</strong></p>  <p>After I enter my service’s URL, I’m given the corresponding Runscope URL.&#160; Additionally, I’m able to see several examples of how I can use that URL in different languages.&#160; I’m going to go ahead and copy that URL and in my Mobile Service client, I’m going to replace the Mobile Service URL with the Runscope URL.&#160; No matter which client you’re using, you’ll find the Mobile Service URL wherever you are instantiating or setting up your MobileServiceClient (or MSClient for iOS).&#160; Absolutely nothing else has to change in my client.&#160; If you were accessing your own Web API or service layer, the steps would be the exact same on the client side.&#160; You just use your own URL when you create your bucket.</p>  <p><strong>Inspecting the request and response</strong></p>  <p>Now we’re ready to see Runscope in action.&#160; In my case, I’m going to load up the iOS app (which is a simple todo list).&#160; When you run the Mobile Service’s quick start app, the first thing it does is send a request to your service to pull down any existing todo items (which aren’t completed).&#160; As soon as you do that, you’ll see a new request appear in the Runscope portal:</p>  <p align="center"><img title="New Runscope Request" alt="New Runscope Request" src="http://storage.chrisrisner.com/images/runscope-new-request.jpg" /></p>  <p>Clicking on that link shows us our first request and response:</p>  <p align="center"><img title="Runscope Request" alt="Runscope Request" src="http://storage.chrisrisner.com/images/runscope-request.jpg" width="634" height="47" /></p>  <p>Clicking on that, we first see the response.&#160; Clicking <strong>View Request</strong> shows all of the headers and querystring information for our request:</p>  <p align="center"><img title="Runscope Request" alt="Runscope Request" src="http://storage.chrisrisner.com/images/runscope-empty-request.jpg" width="737" height="325" /></p>  <p>Of importance in the above two images are that we can see:</p>  <ul>   <li>the full URL we are making the request to. </li>    <li>the request type (GET) </li>    <li>that <strong>gzip</strong> is enabled </li>    <li>that the user agent has been set to <strong>ZUMO/1.0</strong> (this is set by the Mobile Services SDK) </li>    <li>the Zumo Application Key </li>    <li>the Zumo Installation ID </li>    <li>the Zumo version </li>    <li>the query string parameters (complete eq false) </li> </ul>  <p>If we go back to viewing the response, we see the response body was just an empty JSON array:</p>  <p align="center"><img title="Runscope Response" alt="Runscope Response" src="http://storage.chrisrisner.com/images/runscope-response.jpg" /></p>  <p>If we go ahead and insert a new item, we can see that our new request is a POST and contains a body:</p>  <p align="center"><img title="Runscope Post Request" alt="Runscope Post Request" src="http://storage.chrisrisner.com/images/runscope-post-request.jpg" /></p>  <p>Now if we hop over and look at the response to this:</p>  <p align="center"><img title="Runscope Post Response" alt="Runscope Post Response" src="http://storage.chrisrisner.com/images/runscope-post-response.jpg" /></p>  <p>We can see that after we post the item, we get the item back with a new <strong>id </strong>property that was generated on the server side of our Mobile Service.&#160; That’s all there is to being able to see all of our requests and responses that are going across the wire with only changing the one URL on the client side!</p>  <p><strong>Secuity</strong></p>  <p>In the above example, by changing one URL, I’m able to see all of the requests made by my application and all of the responses they receive.&#160; This is powerful stuff.&#160; It’s even more powerful because this is still using HTTPS.&#160; I didn’t have to tell my application to ignore invalid SSL certs or anything like that.&#160; That means that if I didn’t know it was happening and didn’t bother checking to see where traffic from my device was heading, I might not even know I was going through Runscope.&#160; If you’re sending super sensitive information across the wire, even if it is HTTPS, this is one thing to be cautious about.&#160; Runscope has a <a title="Runscope Security" href="https://www.runscope.com/docs/security">full page talking about security practices</a>, both on their side and on your side as a developer.&#160; Runscope themselves use HTTPS on their whole site and ensure that each user in an organization has their own unique username and password and that only those people granted access can see your data.&#160; Runscope recommends that you rely on HTTPS as well (if you’re not using HTTPS to talk to your server layer, it doesn’t really matter if something like Runscope is in the middle, everything you send is unsecured).&#160; </p>  <p><strong>Pricing</strong></p>  <p>As I mentioned above, when you create a new account, you’re automatically signed up for a 30 day trial of their Team plan.&#160; There are three separate plans they have including Free, Starter, and Team.&#160; The plan your own dictates the number of requests you can make per month, the number of buckets you can have, the number of team members you can have with user accounts, and the service regions Runscope will work in.&#160; The free plan allows you to have 3 separate buckets and process 2500 requests per month.&#160; This is really great and is more than enough for my occasional usage for debugging purposes.&#160; You can read more about their <a title="Runscope plans and pricing" href="https://www.runscope.com/pricing-and-plans">plans and pricing here</a>.</p>  <p><strong>More information</strong></p>  <p>I would highly recommend checking out the Runscope website and actually taking it for a free spin.&#160; You can also listen to <a title="Runscope on Herding Code" href="http://herdingcode.com/herding-code-168-john-sheehan-on-runscope/">Herding Code episode 168</a> where John Sheehan of Runscope talks about the service and where it’s going.&#160; Also, you can see me using Runscope to debug an issue live (at the time) in this <a title="Debugging with Runscope at TechEd" href="http://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/DEV-B354#fbid=K8-tSUO9ofT">video from TechEd NA 2013</a>.&#160; It’s towards the end of the video where I’m using it.&#160; In this situation I was sending over an incorrect variable name and Runscope helped me figure that out.</p>  <p>Let me know if using Runscope helps you out!</p>