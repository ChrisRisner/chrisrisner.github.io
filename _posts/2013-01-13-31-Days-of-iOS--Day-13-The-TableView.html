---
layout: post
title: "31 Days of iOS: Day 13-The TableView"
date: Sun Jan 13 2013 10:10:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, iOS, XCode]
excerpt: "This is day 13 in the 31 Days of iOS and talks about how to display data in a UITableView.  We'll go over how to get a basic table view into your application and then go on to make use of custom views and handling interactions with your table."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,TableView,UITableView,Table View Cell,UITableViewDelegate,UITableViewDataSource,numberOfSections,numberOfRows,How to develop iOS,iOS intro,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-13-31-Days-of-iOS--Day-13-The-TableView.html
disqus_identifier: 31-Days-of-iOS--Day-13–The-TableView
redirect_from:
  - /2013-01-13-31-Days-of-iOS--Day-13%E2%80%93The-TableView/
  - /2013-01-13-31-Days-of-iOS--Day-13–The-TableView/
---
<p align="left"><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 13 in the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; We just wrapped up a <a title="iOS Subseries on Data Storage" href="http://chrisrisner.com/31-Days-of-iOS--Day-12%E2%80%93Core-Data">series on data storage</a> and sharing data between different view controllers.&#160; Today we’re going to move on to something new: the <strong>TableView</strong>.&#160; The <strong>TableView</strong> is used to display a list of information.&#160; Many of the built in apps use this view type including <strong>Contacts</strong>, <strong>Mail</strong>, <strong>Notes</strong>, and more.&#160; In general the idea is that each row displays a single record of information and that each row appears the same.&#160; Tapping on a row usually opens whatever item is associated with it (i.e. in a details view).&#160; We’ll be starting with a brand new project, but if you’d like to <a title="iOS Day 13 Source Code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDayThirteen.zip">follow along with the completed code, you can access it here</a>.</p>  <p><strong>Creating our project</strong></p>  <p>Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application </strong>and name it <strong>DayThirteen</strong>:</p>  <p align="center"><img title="iOS Day 13 New Project" alt="iOS Day 13 New Project" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-new-project.jpg" width="498" height="417" /></p>  <p>We’ve got the basic boilerplate project now.</p>  <p><strong>Adding the TableView</strong></p>  <p>Open <strong>MainStoryboard.storyboard</strong>.&#160; You should see a normal blank view.&#160; In the UI element selector in the bottom right of Xcode, find the <strong>Table View</strong> and drag it onto your view controller.&#160; Once you drop it, it should take up the whole view:</p>  <p align="center"><img title="Table View in the UI" alt="Table View in the UI" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-tableview-ui.jpg" width="210" height="400" /></p>  <p>Next, <strong>control + click and drag</strong> from the <strong>Table View</strong> to the <strong>View Controller</strong> below it:</p>  <p align="center"><img title="setting tableview delegate and datasource" alt="setting tableview delegate and datasource" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-setting-delegate.jpg" width="227" height="275" /></p>  <p>After you let go, you should see a popup appear allowing you to select <strong>dataSource </strong>and <strong>delegate</strong>.&#160; Pick one and then repeat and pick the other.&#160; If you run the app now, it will crash because you’ve told the <strong>Table View</strong> that it can call it’s source and delegate methods on the <strong>ViewController</strong> object, but we haven’t implemented them yet.&#160; We’re going to change the UI a bit more before we do that.</p>  <p><strong>Adding a cell</strong></p>  <p>Return to the UI element selector in the bottom right of Xcode and find the <strong>Table View Cell</strong>.&#160; Drag that onto your <strong>Table View</strong> in the UI and you should get this:</p>  <p align="center"><img title="Adding a table view cell" alt="Adding a table view cell" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-adding-cell.jpg" /></p>  <p>This allows us to customize our UI later on.&#160; In the <strong>Utilities</strong> panel switch over to the <strong>Attributes Inspector</strong>.&#160; Set the <strong>Identifier</strong> to <strong>Cell</strong>.&#160; </p>  <p align="center"><img title="Reuse Identifier" alt="Reuse Identifier" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-reuse-identifier.jpg" /></p>  <p>We’ll use this later in the code to help us find the cell.&#160; Now we can switch over to the code and start wiring our app up.</p>  <p><strong>The Header file</strong></p>  <p>Open up <strong>ViewController.h</strong>.&#160; Our changes here are minimal as all we need to do is make our class implement the <strong>UITableViewDelegate</strong> and <strong>UITableViewDataSource</strong>:</p>  <p><script src="https://gist.github.com/4036700.js?file=viewcontroller.h"></script></p>  <p>Now we can implement the class.</p>  <p><strong>Handling the table methods</strong></p>  <p>The first thing we need to do is create a data source.&#160; In most applications, we’d pull the data we’re displaying from a file, a database, or a network connection.&#160; For ease’s sake, we’re just going to use a <strong>NSArray</strong> we will initialize in our view’s <strong>viewDidLoad</strong> method:</p>  <p><script src="https://gist.github.com/4036700.js?file=init.m"></script></p>  <p>Here we’re just putting <strong>NSDictionary</strong>s into our array.&#160; Now we can add the methods for <strong>UITableViewDataSource</strong>.&#160; We’ll star with <strong>numberOfSectionsInTableView</strong>:</p>  <p><script src="https://gist.github.com/4036700.js?file=numberofsections1.m"></script></p>  <p>For now we’re just hard coding that our table has 1 section.&#160; Sections are good for breaking up the data in your table.&#160; So for example, if we were displaying song names, we might have one section for each letter in the alphabet that has songs.&#160; Next up, we handle the <strong>numberOfRowsInSection </strong>method:</p>  <p><script src="https://gist.github.com/4036700.js?file=numberOfRowsInsection1.m"></script></p>  <p>Since we only have one section we’ll return the number of items in our array.&#160; This means that each item in the array will populate a row in our table.&#160; If we were using the song analogy above, we might figure out which letter’s section it was asking for and then return the number of songs that start with that letter.&#160; The last method we need to implement before we run is <strong>cellForRowAtIndexPath</strong>:</p>  <p><script src="https://gist.github.com/4036700.js?file=cellForRowAtIndexPath1.m"></script></p>  <p>We’re first calling <strong>dequeueReusableCellWithIdentifer </strong>to get a cell object.&#160; We’ll talk more about this method in a second.&#160; Notice that we’re passing <strong>Cell</strong> into this method.&#160; That was the identifier we used above when we set the <strong>Table View Cell Identifier</strong>.&#160; Next we’re pulling the <strong>NSDictionary </strong>from our array at the index that was sent into the method.&#160; Lastly, we use that <strong>NSDictionary</strong>’s <strong>name</strong> element to set the <strong>text </strong>value of <strong>cell.textLabel</strong>.&#160; We didn’t have to put this text label in the cell earlier, it’s just there by default.&#160; Now when we run our app, we should see our rows:</p>  <p align="center"><img title="Table view rows showing up" alt="Table view rows showing up" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-rows-showing-up.jpg" width="273" height="414" /></p>  <p><strong>What’s this dequeueing nonsense?</strong></p>  <p>Every cell that shows up on screen has to be allocated in memory.&#160; Imagine that your datasource isn’t 13 items like ours is right now, but 30,000 songs.&#160; If you had to allocate a cell for each of those 30,000 songs when you showed your <strong>TableView</strong>, your app would receive an <strong>out of memory </strong>error and crash very quickly.&#160; iOS handles this by only allocating enough cells for what fits on screen.&#160; So, when one row goes off the screen, instead of that cell being deallocated and a new cell being allocated, the cell leaving the screen is reused for the cell showing up.&#160; So in the example above, when cell one rolls off, it’s reused for cell thirteen.&#160; You get this without having to do anything thankfully.&#160; However, there is one thing to be aware of.&#160; If your cell has different UI elements and you don’t set (or reset) one when a cell is reused, it will maintain the values when it was previously used.&#160; So for example, if we were only setting the cell’s <strong>textLabel.text</strong> property if the <strong>name</strong> element in the <strong>NSDictionary</strong> had a value and <strong>itemThirteen</strong> didn’t have a <strong>name</strong>, it would show up as <strong>item one</strong> when you scroll up.&#160; You can test this by changing the <strong>cellForRowAtIndexPath</strong> method to only set the text for&#160; index’s less than 12:</p>  <p><script src="https://gist.github.com/4036700.js?file=cellForRowAtIndexPath2.m"></script></p>  <p><strong>Handling row taps</strong></p>  <p>You have two options for handling row taps.&#160; One of them in the code side and the other in your storyboard.&#160; We’ll look at the code way first:</p>  <p><script src="https://gist.github.com/4036700.js?file=didSelectRowAtIndexPath.m"></script></p>  <p>Here we’re implementing the <strong>didSelectRowAtIndexPath</strong> method that is part of <strong>UITableViewDelegate</strong>.&#160; This will now get fired whenever you tap a row.&#160; Once it’s done, you can use the <strong>tableView</strong> passed in to get access to the cell that was tapped or just go directly to your datasource if you want to.&#160; The alternative is to open your storyboard and <strong>control + click and drag </strong>from your cell to a different <strong>View Controller</strong> that you want to open when a row is tapped:</p>  <p align="center"><img title="control click from prototype cell" alt="control click from prototype cell" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-drag-from-row.jpg" /></p>  <p>The advantage of doing it this way is that the logical flow of your application is handled within your storyboard and not in the code behind.&#160; However, if you need to pass data from the cell that was passed to your new <strong>View Controller</strong>, you’ll need to implement the <strong>prepareForSegue</strong> method in the originating <strong>ViewController</strong> class and set data properties on the <strong>destinationViewController</strong>.&#160; </p>  <p><strong>Customizing the UI</strong></p>  <p>Now that we’ve loaded our rows, let’s look at how we can change from using the default text lable.&#160; Return to <strong>MainStoryboard.storyboard</strong>.&#160; Drag two <strong>label</strong>s onto your prototype cell and then, using the <strong>Attributes Inspector</strong> in the <strong>Utilities</strong> panel, set the <strong>Tag </strong>property under <strong>View</strong> to be <strong>1</strong> and <strong>2 </strong>(1 for the first label and 2 for the second):</p>  <p align="center"><img title="Setting the Tag" alt="Setting the Tag" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-setting-tag.jpg" /></p>  <p>Now you can return to the <strong>cellForRowAtIndexPath</strong> and change how you set the UI:</p>  <p><script src="https://gist.github.com/4036700.js?file=cellForRowAtIndexPath3.m"></script></p>  <p>Instead of using <strong>cell.textLabel</strong>, we get references to view’s inside of the cell by the tag.&#160; We then just set the <strong>text</strong> property on those.&#160; This approach can be used for setting any sort of UI element.&#160; Now run your app and you’ll see the name and the id for each cell:</p>  <p align="center"><img title="cells with custom UIs" alt="cells with custom UIs" src="https://crcomcstorage.blob.core.windows.net/images/31iosday13-custom-ui.jpg" width="261" height="404" /></p>  <p><strong>Conclusion</strong></p>  <p>Today we saw a new way to display data: the <strong>TableView</strong>.&#160; This is a very powerful UI element and is used by many of the built in iOS apps.&#160; Furthermore, we looked at how to customize the UI.&#160; If you take a look around at other apps, you’ll see it’s possible to really customize your UI with the <strong>TableView</strong>.&#160; Also, not that you don’t have to add a <strong>TableView</strong> to a <strong>ViewController</strong> and add all of these methods yourself if you don’t want to.&#160; When you go to add a new file to your project, you can have your new class subclass <strong>UITableViewController </strong>instead of <strong>UIViewController</strong>.&#160; This will generate a view controller that already has the methods in it.&#160; Furthermore, you can add a <strong>Table View Controller</strong> to the UI in your storyboard instead of having to drag and drop a <strong>Table View</strong> yourself.&#160; You can <a title="iOS Day 13 source code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDayThirteen.zip">check out the finished source code from today here</a>.</p>