---
layout: post
title: "31 Days of iOS: Day 22-Using the Gallery"
date: Tue Jan 22 2013 07:18:00
commentsOn: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, XCode, iOS]
excerpt: "This is day 22 in the 31 Days of iOS.  In this article we walk through how to access the photo gallery from your application and how to pull pictures the user selects in the gallery back into your app."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,gallery,UIImagePickerControllerDelegate, UIImagePickerControllerSourceTypeSavedPhotosAlbum,UIImagePickerControllerSourceTypePhotoLibrary,UIImagePickerController,isSourceTypeAvailable,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-22-31-Days-of-iOS--Day-22-Using-the-Gallery.html
disqus_identifier: 31-Days-of-iOS--Day-22-Using-the-Gallery
redirect_from:
  - /2013-01-22-31-Days-of-iOS--Day-22%E2%80%93Using-the-Gallery/
  - /2013-01-22-31-Days-of-iOS--Day-22-Using-the-Gallery/
  - /31-Days-of-iOS--Day-22-Using-the-Gallery/
  - /31-Days-of-iOS--Day-22-Using-the-Gallery
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 22 of the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; <a title="Day 21: Using the Camera" href="http://chrisrisner.com/31-Days-of-iOS--Day-21%E2%80%93Using-the-Camera">Yesterday</a>, we talked about how to use the camera from your applications.&#160; We covered the default controls that come with the camera and discussed how you might add your own custom UI on top of the camera.&#160; Lastly we showed how to display a picture from the camera into the UI of your app.&#160; Today we’re going to look at something very similar:&#160; how to pull photos out of the photo gallery and display them in your app.&#160; The code for this is very similar to using the camera but in order to be more separate (and make it easier for you to get all of the details of the specific topic you want) we’re going to walkthrough all of it here.&#160; We’ll be starting with a brand new project, but if you’d like to <a title="iOS Day 22" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyTwo.zip">follow along with the completed code, you can access it here</a>.</p>  <p><strong>Creating our project and handling the UI</strong></p>  <p>Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application </strong>and name it <strong>DayTwentyTwo</strong>:</p>  <p align="center"><img title="iOS Day 22" alt="iOS Day 22" src="http://storage.chrisrisner.com/images/31iosday22-new-project.jpg" width="487" height="405" /></p>  <p>Open up <strong>MainStoryboard.storyboard</strong> and let’s handle our initial UI.&#160; Drag a round rect button to the top and place an image beneath it.&#160; When you’re done, the UI will look like this:</p>  <p align="center"><img title="Project UI" alt="Project UI" src="http://storage.chrisrisner.com/images/31iosday22-project-ui.jpg" /></p>  <p>Now open the <strong>Assistant Editor</strong> in the top right of Xcode and <strong>control + click and drag</strong> from the button and image over to the view controller code behind. For the button you’ll want to create an action and for the image, an outlet. Before we switch away from our header file, we’ll also want to make the <strong>ViewController</strong> class implement <strong>UIImagePickerControllerDelegate</strong>. When we’re done, the header file will look like this:</p>  <p><script src="https://gist.github.com/4334552.js?file=ViewController.h"></script></p>  <p>Now we can implement the class.</p>  <p><strong>Getting into the photo gallery</strong></p>  <p>Open up <strong>ViewController.m</strong>.&#160; We’ll implement the <strong>tappedGetPhoto</strong> method first to make it open the photo gallery.&#160; To do so, we create a new instance of <strong>UIImagePickerController</strong> and set it’s <strong>sourceType</strong> to either <strong>UIImagePickerControllerSourceTypeSavedPhotosAlbum</strong> or <strong>UIImagePickerControllerSourceTypePhotoLibrary</strong>.&#160; The difference is that the <strong>PhotosAlbum </strong>will take you directly to the album for the pictures taken with the camera (the <strong>Camera Roll</strong>) while <strong>PhotoLibrary</strong> will take you to the albums list (of which <strong>Camera Roll</strong> is one of the albums if the device has a camera).&#160; Either way, you should see something like one of the two images below (the left is the library and the right is the photos album):</p>  <p align="center"><img title="iOS Camera roll and library" alt="iOS Camera roll and library" src="http://storage.chrisrisner.com/images/31iosday22-library-and-roll.jpg" /></p>  <p>Now if you tap a photo you’ll just return to your app and nothing will happen.&#160; What we want to happen is for the image we took to appear on the screen where we put an image. To make this happen, we need to add the <strong>UIImagePickerControllerDelegate</strong>’s <strong>didFinishPickingMediaWithInfo</strong> method:</p>  <p><script src="https://gist.github.com/4334552.js?file=didFinishPickingMediaWithInfo.m"></script></p>  <p>The first thing we’ll do is pull the <strong>UIImagePickerControllerOriginImage</strong> property out of the <strong>NSDictionary </strong>that is sent into the method. This property is of the type <strong>UIImage</strong> which is what we can then use to set our <strong>imageView</strong>’s image property using <strong>setImage</strong>. Lastly, we have to call <strong>dismissViewControllerAnimated</strong> on the view controller. If we don’t do this, the preview won’t go away and our app won’t return (even though it returned on it’s own when we didn’t implement the method). Now when we run our app, select a photo, and approve it, we should see the image view set:</p>  <p align="center"><img src="http://storage.chrisrisner.com/images/31iosday22-selected-image.jpg" /></p>  <p><strong>Conclusion</strong></p>  <p>Today we reviewed how to use the photo gallery.&#160; Combined with yesterday’s article on using the camera, you should now have the knowledge to use both the camera and the gallery.&#160; This means you can give users the ability to take their own images or pull from ones they already created. You can <a title="iOS Day 22" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyTwo.zip">download the completed code from today’s walkthrough here</a>.</p>