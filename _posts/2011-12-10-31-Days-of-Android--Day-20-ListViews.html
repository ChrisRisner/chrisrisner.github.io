---
layout: post
title: "31 Days of Android: Day 20–ListViews"
date: Sat Dec 10 2011 09:31:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Android, Google, Java, Mobile, Programming, Phone]
excerpt: "This is another tutorial in the 31 Days of Android series.  Today we'll talk about how to use ListViews.  We'll go over creating a very simple one using a String array and an array adapter, how to create a custom layout to use with the ListView, how to use different layouts for each row, and how to create a custom ArrayAdapter."
logoUrl: null
keywords: Android,31 days of Android,Google,Google Android,Android Intro,How to develop for android,listview,custom layout with listview,using different layouts for rows in listview,reusing views in listview,currentview,custom arrayadapter,Tutorial
filepath: 2011-12-10-31-Days-of-Android--Day-20-ListViews.html
disqus_identifier: 31-Days-of-Android--Day-20–ListViews
redirect_from:
  - /2011-12-10-31-Days-of-Android--Day-20%E2%80%93ListViews/
  - /2011-12-10-31-Days-of-Android--Day-20–ListViews/
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" title="" alt="31 Days of Android" align="right" src="http://chrisrisner.com/upload/android-200.png" />Yesterday for <a title="31 Days of Android" href="http://chrisrisner.com/31-Days-of-Android">31 Days of Android</a>, I went over <strong>ScrollView</strong>s.&#160; As a reminder, <strong>ScrollView</strong>s can be used to vertically or horizontally (though not really at the same time) scroll in a layout that has more information than fits on the devices screen.&#160; The other way we can display more information than what fits on the screen is by using a <strong>ListView</strong>.&#160; Where a <strong>ScrollView</strong> allows you to specify any <strong>View</strong>s you want underneath it, the <strong>ListView</strong> is used to display a group of items using the same layout.&#160; The <strong>ListView</strong> implements it’s own scrolling and SHOULD NOT be used with a <strong>ScrollView</strong>.&#160; We’ll talk about why that is later, for now, let’s implement a <strong>ScrollView</strong>.&#160; You can <a title="Android Day Twenty Inital Source Code" href="http://chrisrisner.com/upload/DayTwentyInitial.zip">download the starter code for today’s app here</a>.</p>  <p><strong></strong></p>  <p><strong>Your First ListView</strong></p>  <p>There are a couple different ways to create a <strong>ListView</strong>.&#160; We’re going to do the most simple first.&#160; Open up <strong>src/com.daytwenty/DayTwentyActivity.java</strong>.&#160; Right now all this <strong>Activity</strong> does is set it’s content view:</p>  <div class="csharpcode">   <pre class="alt"><span class="kwrd">public</span> <span class="kwrd">class</span> DayTwentyActivity extends Activity {</pre>

  <pre>    <span class="rem">/** Called when the activity is first created. */</span></pre>

  <pre class="alt">    @Override</pre>

  <pre>    <span class="kwrd">public</span> <span class="kwrd">void</span> onCreate(Bundle savedInstanceState) {</pre>

  <pre class="alt">        super.onCreate(savedInstanceState);</pre>

  <pre>        setContentView(R.layout.main);       </pre>

  <pre class="alt">    }        </pre>

  <pre>}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>All of the activities you’ve used so far in the series have been of the type <strong>Activity</strong>, however there is another type:&#160; the <strong>ListActivity</strong>.&#160; The <strong>ListActivity</strong> extends <strong>Activity </strong>and is used specifically to display a <strong>ListView</strong> and means that you’re screen is meant to be taken up by nothing but the <strong>ListView</strong>.&#160; When using a <strong>ListActivity</strong>, you don’t need to call <strong>setContentView</strong> but instead set the activity’s <strong>ListAdapter</strong>.&#160; To do this, you need to create an <strong>ArrayAdapter</strong> which needs the current context, the array of elements you want to display, and the layout you want to use for each row.&#160; For the array of elements, you can just create a String array.&#160; Here you’re creating one that contains the titles of the first 16 Days of Android:</p>

<div class="csharpcode">
  <pre class="alt">String[] values = <span class="kwrd">new</span> String[] { </pre>

  <pre>     <span class="str">&quot;Day 1 - Getting set up for development&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 2 - Creating Android Virtual Devices&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 3 - A Java Refresher&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 4 - Our First App&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 5 - Adding Multiple Activities and using Intents&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 6 - Options Menus and Base Activities&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 7 - Sharing Data Between Activities&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 8 - The Android Project Structure&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 9 - Debugging Your Applications&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 10 - The Back Button&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 11 - Device Orientation&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 12 - Linear Layouts&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 13 - Relative Layouts&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 14 - Table Layout and Frame Layout&quot;</span>,</pre>

  <pre>     <span class="str">&quot;Day 15 - Toasts&quot;</span>,</pre>

  <pre class="alt">     <span class="str">&quot;Day 16 - Notifications&quot;</span> };</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Make sure you put this in your code as a class variable (i.e. outside of the <strong>onCreate </strong>method.&#160; You’re going to need this later) Now you need to create a new <strong>ArrayAdapter</strong> and pass in this array along with a few other important things:</p>

<div class="csharpcode">
  <pre class="alt">ArrayAdapter&lt;String&gt; listAdapter = <span class="kwrd">new</span> ArrayAdapter&lt;String&gt;(<span class="kwrd">this</span>,</pre>

  <pre>                            android.R.layout.simple_list_item_1, values);</pre>

  <pre class="alt">setListAdapter(listAdapter);</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Here you’re passing in the current activity as the <strong>Context</strong>, the values array you created earlier, and a built in list item layout.&#160; When you run your app, you’ll see the elements in the array appear on the screen and you’ll be able to tap and drag up and down in the list:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Android ListView" alt="Android ListView" src="http://chrisrisner.com/upload/android_day_twenty_listview.png" /></p>

<p><strong></strong></p>

<p><strong>Handling item clicks</strong></p>

<p>Displaying a list of items is great, but what if you want clicking on them to do something.&#160; In the example above we could load each article’s web page when the user clicks on them if they wanted to.&#160; Let’s take a look at how to do that.&#160; The <strong>ListActivity</strong> allows you to override a method that is called whenever a user clicks on an item called <strong>onListItemClicked</strong>:</p>

<div class="csharpcode">
  <pre class="alt">@Override</pre>

  <pre><span class="kwrd">protected</span> <span class="kwrd">void</span> onListItemClick(ListView l, View v, <span class="kwrd">int</span> position, <span class="kwrd">long</span> id) {</pre>

  <pre class="alt">    <span class="rem">// TODO Auto-generated method stub</span></pre>

  <pre>    super.onListItemClick(l, v, position, id);</pre>

  <pre class="alt">}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>When this method is called, it passes in the <strong>ListView</strong> that the click occurred in, the <strong>View</strong> that was clicked (i.e. the row’s <strong>View</strong>), the position in the <strong>ListView</strong> of the click, and the row ID of the item that was clicked.&#160; Since we don’t have all of the URLs for the web pages handy, let’s just show a <strong>Toast</strong> with the text of whatever was clicked.&#160; This is actually super easy to do using the position value that is sent in:</p>

<div class="csharpcode">
  <pre class="alt">@Override</pre>

  <pre><span class="kwrd">protected</span> <span class="kwrd">void</span> onListItemClick(ListView l, View v, <span class="kwrd">int</span> position, <span class="kwrd">long</span> id) {</pre>

  <pre class="alt">    super.onListItemClick(l, v, position, id);</pre>

  <pre>    Toast.makeText(<span class="kwrd">this</span>, values[position], Toast.LENGTH_LONG).show();</pre>

  <pre class="alt">}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now when you run your app and tap on an item, you’ll have a <strong>Toast</strong> appear as desired:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="ListView on Click" alt="ListView on Click" src="http://chrisrisner.com/upload/android_day_twenty_listview_onclick.png" /></p>

<p>If we did have URLs for each page, you could load it using a couple of different methods.&#160; You could <a title="Android Day 18 Web Views" href="http://chrisrisner.com/31-Days-of-Android--Day-18%E2%80%93The-Webview">load up an Activity with a WebView in it like we did in Day 18</a>.&#160; There is another method that makes use of <strong>Intent</strong>s that we will get into a few days from now.</p>

<p><strong>Create your own row layout</strong></p>

<p>So far you’ve used a built in layout, <strong>android.R.layout.simple_list_item_1</strong>, to display each row of your <strong>ListView</strong>.&#160; There are a few different built in layouts available that you can use.&#160; For example, if you change <strong>simple_list_item_1 </strong>to <strong>test_list_item</strong> and rerun your application, you’ll see that the size of the text and the rows has been decreased:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Android TestListView" alt="Android TestListView" src="http://chrisrisner.com/upload/android_day_twenty_testlistview.png" width="222" height="245" /></p>

<p>This is great and gives you a few options to easily work with.&#160; However, chances are good that you’re going to want to have better control over how you display the information.&#160; To do this, right click on the <strong>res/layout </strong>folder and choose <strong>New –&gt; Other </strong>then select <strong>Android XML File</strong>.&#160; You can leave it with a <strong>LinearLayout </strong>root element and name your new layout <strong>list_item</strong>.&#160; Let’s say you want to show an icon on the left side of each row and then the text to the right of that.&#160; To do that, change the <strong>LinearLayout</strong> to use a horizontal orientation and then add an <strong>ImageView</strong> and a <strong>TextView</strong>.&#160; For now, set the <strong>ImageView</strong> to the <strong>ic_launcher </strong>icon drawable and the <strong>TextView </strong>to use an ID named <strong>text1</strong>.&#160; When you’re done, your XML should look like this:</p>

<div class="csharpcode">
  <pre class="alt"><span class="kwrd">&lt;</span><span class="html">LinearLayout</span> <span class="attr">xmlns:android</span><span class="kwrd">=&quot;http://schemas.android.com/apk/res/android&quot;</span></pre>

  <pre>    <span class="attr">android:layout_width</span><span class="kwrd">=&quot;match_parent&quot; android:id=&quot;@+id/layout_item”</span></pre>

  <pre class="alt">    <span class="attr">android:layout_height</span><span class="kwrd">=&quot;match_parent&quot;</span><span class="kwrd">&gt;</span></pre>

  <pre>    <span class="kwrd">&lt;</span><span class="html">ImageView</span></pre>

  <pre class="alt">        <span class="attr">android:id</span><span class="kwrd">=&quot;@+id/imageView1&quot;</span></pre>

  <pre>        <span class="attr">android:layout_width</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:layout_height</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre>        <span class="attr">android:src</span><span class="kwrd">=&quot;@drawable/ic_launcher&quot;</span> <span class="kwrd">/&gt;</span></pre>

  <pre class="alt">    <span class="kwrd">&lt;</span><span class="html">TextView</span></pre>

  <pre>        <span class="attr">android:id</span><span class="kwrd">=&quot;@+id/text1&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:layout_width</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre>        <span class="attr">android:layout_height</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:text</span><span class="kwrd">=&quot;TextView&quot;</span> <span class="kwrd">/&gt;</span></pre>

  <pre><span class="kwrd">&lt;/</span><span class="html">LinearLayout</span><span class="kwrd">&gt;</span></pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now go back to your <strong>DayTwentyActivity.java</strong> file where you’re creating your <strong>ArrayAdapter</strong>.&#160; Instead of using <strong>simple_list_item_1</strong> you need to use your new <strong>list_item</strong> layout.&#160; In addition, you need to pass in the ID of the <strong>TextView</strong> that you want to use to display the text passed in the array.&#160; Your new <strong>ArrayAdapter </strong>constructor and call to <strong>setListAdapter</strong> will look like this:</p>

<div class="csharpcode">
  <pre class="alt">ArrayAdapter&lt;String&gt; listAdapter = <span class="kwrd">new</span> ArrayAdapter&lt;String&gt;(<span class="kwrd">this</span>,</pre>

  <pre>                           R.layout.list_item, R.id.text1, values);</pre>

  <pre class="alt">setListAdapter(listAdapter);</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now when you run your app, you’ll see the icon on the left of each row and the text right next to it:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Custom List View Layout" alt="Custom List View Layout" src="http://chrisrisner.com/upload/android_day_twenty_custom_listview.png" width="265" height="228" /></p>

<p>With this knowledge you should be able to make some interesting looking <strong>ListView</strong>s.</p>

<p>&#160;</p>

<p><strong>Creating your own Adapter</strong></p>

<p>So far you’ve learned how to show simple information in a <strong>ListView</strong> as well as how to display a custom layout for each row.&#160; One thing we haven’t gone over yet though is how to use logic on a per row basis or display different rows using different layouts.&#160; In order to do this, you need to extend the <strong>ArrayAdapter</strong> class and create your own.&#160; Right click on <strong>src/com.daytwenty</strong> and choose <strong>New –&gt; Class</strong>.&#160; Name your new class <strong>CustomArrayAdapter</strong> and set it’s superclass to <strong>android.widget.ArrayAdapter&lt;T&gt;</strong>.&#160; This class, like the <strong>ArrayAdapter</strong> you used before, needs to take in a <strong>Context</strong> and your list of values.&#160; You’ll need to keep a reference to these values in your adapter for later usage.&#160; Up to now, your adapter should look like this:</p>

<div class="csharpcode">
  <pre class="alt"><span class="kwrd">public</span> <span class="kwrd">class</span> CustomArrayAdapter extends ArrayAdapter&lt;String&gt; {</pre>

  <pre>    <span class="kwrd">private</span> Context context;</pre>

  <pre class="alt">    <span class="kwrd">private</span> String[] stringValues;</pre>

  <pre>    </pre>

  <pre class="alt">    <span class="kwrd">public</span> CustomArrayAdapter(Context context, String[] stringValues) {</pre>

  <pre>        super(context, R.layout.list_item, stringValues);</pre>

  <pre class="alt">        <span class="kwrd">this</span>.context = context;</pre>

  <pre>        <span class="kwrd">this</span>.stringValues = stringValues;</pre>

  <pre class="alt">    }</pre>

  <pre>}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>The last thing you need to do to your adapter, for now, is to override the <strong>getView</strong> method.This method is really important to a <strong>ListView</strong> as it is called for each view that is going to be displayed.&#160; I say “going to be” because if you scroll down a list the items that appear on screen will have <strong>getView</strong> called for them immediately prior to showing up on screen.&#160; When you scroll back up, <strong>getView</strong> is called again for the views that were on screen before and will come back on screen.&#160; This means that <strong>getView</strong> can be called multiple times for the same view as the user scrolls up and down.&#160; For now, the <strong>getView</strong> you implement will be very simple but a little later we’ll talk about how to use this fact to improve the performance of your <strong>ListView</strong>.&#160; Let’s look at the code necessary to show the same information you were before:</p>

<div class="csharpcode">
  <pre class="alt">@Override</pre>

  <pre><span class="kwrd">public</span> View getView(<span class="kwrd">int</span> position, View convertView, ViewGroup parent) {</pre>

  <pre class="alt">    LayoutInflater inflater = (LayoutInflater) context</pre>

  <pre>            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);</pre>

  <pre class="alt">    View view = inflater.inflate(R.layout.list_item, parent, <span class="kwrd">false</span>);    </pre>

  <pre>    TextView text1 = (TextView) view.findViewById(R.id.text1);</pre>

  <pre class="alt">    text1.setText(stringValues[position]);        </pre>

  <pre>    <span class="kwrd">return</span> view;</pre>

  <pre class="alt">}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Here, you’re using <strong>LayoutInflater</strong> to inflate the <strong>list_item</strong> layout.&#160; You’re still going to use this layout for each row right now.&#160; Next, you’re getting an instance of the <strong>TextView</strong> that is on the layout and setting it’s text value.&#160; Now you can change the code in <strong>DayTwentyActivity</strong> to use your new <strong>CustomArrayAdapter</strong>:</p>

<div class="csharpcode">
  <pre class="alt">CustomArrayAdapter listAdapter = <span class="kwrd">new</span> CustomArrayAdapter(<span class="kwrd">this</span>, values);</pre>

  <pre>setListAdapter(listAdapter);</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>When you run your app now, it won’t look any different than it did before.&#160; Let’s say you wanted to change the background and text color of odd rows, to black on white and leave the even rows as white on black.&#160; To do this, you first need to add a <strong>colors.xml</strong> file into the <strong>res/values</strong> folder.&#160; Create a resource for white and for black:</p>

<div class="csharpcode">
  <pre class="alt"><span class="kwrd">&lt;</span><span class="html">resources</span><span class="kwrd">&gt;</span></pre>

  <pre>    <span class="kwrd">&lt;</span><span class="html">color</span> <span class="attr">name</span><span class="kwrd">=&quot;white&quot;</span><span class="kwrd">&gt;</span>#FFFFFF<span class="kwrd">&lt;/</span><span class="html">color</span><span class="kwrd">&gt;</span></pre>

  <pre class="alt">    <span class="kwrd">&lt;</span><span class="html">color</span> <span class="attr">name</span><span class="kwrd">=&quot;black&quot;</span><span class="kwrd">&gt;</span>#000000<span class="kwrd">&lt;/</span><span class="html">color</span><span class="kwrd">&gt;</span>    </pre>

  <pre><span class="kwrd">&lt;/</span><span class="html">resources</span><span class="kwrd">&gt;</span></pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now you could handle setting odd rows to use different colors in two ways:&#160; you can change the background and text color programmatically inside your <strong>CustomArrayAdapter</strong> or, you could create a different layout and use that for odd rows.&#160; Let’s look at the second approach.&#160; First you need to add a new layout by right clicking on <strong>res/layout</strong> and going to <strong>New –&gt; Other </strong>and choose <strong>Android XML File</strong>.&#160; Name this one <strong>odd_list_item</strong>.&#160; While you could make the layout drastically different, for now keep it the same but set the <strong>background</strong> attribute on the root layout and set the <strong>textColor</strong> on the <strong>TextView</strong>.&#160; When you’re done this is what you should have:</p>

<div class="csharpcode">
  <pre class="alt"><span class="kwrd">&lt;</span><span class="html">LinearLayout</span> <span class="attr">xmlns:android</span><span class="kwrd">=&quot;http://schemas.android.com/apk/res/android&quot;</span></pre>

  <pre>    <span class="attr">android:layout_width</span><span class="kwrd">=&quot;match_parent&quot;</span></pre>

  <pre class="alt">    <span class="attr">android:layout_height</span><span class="kwrd">=&quot;match_parent&quot;</span></pre>

  <pre>    <span class="attr">android:background</span><span class="kwrd">=&quot;@color/white&quot;</span><span class="kwrd">&gt;</span></pre>

  <pre class="alt">    <span class="kwrd">&lt;</span><span class="html">ImageView</span></pre>

  <pre>        <span class="attr">android:id</span><span class="kwrd">=&quot;@+id/imageView1&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:layout_width</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre>        <span class="attr">android:layout_height</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:src</span><span class="kwrd">=&quot;@drawable/ic_launcher&quot;</span> <span class="kwrd">/&gt;</span></pre>

  <pre>    <span class="kwrd">&lt;</span><span class="html">TextView</span></pre>

  <pre class="alt">        <span class="attr">android:id</span><span class="kwrd">=&quot;@+id/text1&quot;</span>        </pre>

  <pre>        <span class="attr">android:layout_width</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:layout_height</span><span class="kwrd">=&quot;wrap_content&quot;</span></pre>

  <pre>        <span class="attr">android:text</span><span class="kwrd">=&quot;TextView&quot;</span></pre>

  <pre class="alt">        <span class="attr">android:textColor</span><span class="kwrd">=&quot;@color/black&quot;</span> <span class="kwrd">/&gt;</span></pre>

  <pre><span class="kwrd">&lt;/</span><span class="html">LinearLayout</span><span class="kwrd">&gt;</span></pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now you’re ready to use this layout in your code.&#160; Go back to your <strong>CustomArrayAdapter</strong> and, instead of instantiating the <strong>view</strong> variable on it’s declaration line, check to see what <strong>position</strong> is being passed in and pick the correct layout to inflate depending on that:</p>

<div class="csharpcode">
  <pre class="alt">View view;        </pre>

  <pre><span class="kwrd">if</span> (position % 2 == 0)</pre>

  <pre class="alt">    view = inflater.inflate(R.layout.list_item, parent, <span class="kwrd">false</span>);</pre>

  <pre><span class="kwrd">else</span></pre>

  <pre class="alt">    view = inflater.inflate(R.layout.odd_list_item, parent, <span class="kwrd">false</span>);</pre>
</div>

<p>
  <br />Now when you run your app, you’ll have alternating rows:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Alternating Rows in ListView" alt="Alternating Rows in ListView" src="http://chrisrisner.com/upload/android_day_twenty_alternating_rows.png" width="245" height="234" /></p>

<p><strong></strong></p>

<p><strong>Improving the getView Method</strong></p>

<p>As mentioned earlier, the <strong>getView</strong> method is a very important part of the <strong>ListView</strong>.&#160; Above, you inflated a new layout each time <strong>getView</strong> was called.&#160; Inflating a layout is fairly expensive and not something you want to do unnecessarily.&#160; Thankfully, the <strong>ListView</strong> is optimized so that you don’t always have to.&#160; As you scroll up and down the <strong>ListView</strong> and <strong>getView</strong> is called, the <strong>convertView</strong> parameter will be filled.&#160; If the <strong>convertView </strong>parameter is not null, then you don’t need to inflate a <strong>View</strong>.&#160; With this in mind you can change the <strong>getView</strong> method to look like this:</p>

<div class="csharpcode">
  <pre class="alt">@Override</pre>

  <pre><span class="kwrd">public</span> View getView(<span class="kwrd">int</span> position, View convertView, ViewGroup parent) {</pre>

  <pre class="alt">    LayoutInflater inflater = (LayoutInflater) context</pre>

  <pre>            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);</pre>

  <pre class="alt">    View view;</pre>

  <pre>    <span class="kwrd">if</span> (convertView == <span class="kwrd">null</span>) {</pre>

  <pre class="alt">        <span class="kwrd">if</span> (position % 2 == 0)</pre>

  <pre>            view = inflater.inflate(R.layout.list_item, parent, <span class="kwrd">false</span>);</pre>

  <pre class="alt">        <span class="kwrd">else</span></pre>

  <pre>            view = inflater.inflate(R.layout.odd_list_item, parent, <span class="kwrd">false</span>);</pre>

  <pre class="alt">    }</pre>

  <pre>    <span class="kwrd">else</span></pre>

  <pre class="alt">        view = convertView;</pre>

  <pre>    TextView text1 = (TextView) view.findViewById(R.id.text1);</pre>

  <pre class="alt">    text1.setText(stringValues[position]);        </pre>

  <pre>    <span class="kwrd">return</span> view;</pre>

  <pre class="alt">}</pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>Now when you run your app and scroll up and down, you’ll probably see something a little weird happen:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="listview using currentview" alt="listview using currentview" src="http://chrisrisner.com/upload/android_day_twenty_using_currentview.png" width="206" height="237" /></p>

<p>Initially, all of the rows will be alternating like they were before. Now, when you scroll you’ll see rows being the same color sometimes for multiple rows.&#160; The reason for this is that when you scroll the view being passed in as the <strong>currentView</strong> is not necessarily going to be one that used the same layout (since above you used different layouts instead of programmatically changing colors).&#160; Unfortunately, there isn’t a way around this that I know of.&#160; The alternative would be to not use the different layout resources and set colors in code.&#160; Let’s look at doing that now.&#160; Go back to the <strong>getView</strong> method in your <strong>CustomArrayAdapter</strong>.&#160; You should leave the code in for <strong>convertView</strong> but take out the check on position and setting <strong>view</strong> to <strong>odd_list_item</strong>.&#160; Instead, after you’ve checked <strong>convertView</strong> you should check the position and use that to set the layout’s background color and <strong>text1</strong>’s text color.&#160; Your new <strong>getView</strong> will look like this:</p>

<div class="csharpcode">
  <pre class="alt"><span class="kwrd">public</span> View getView(<span class="kwrd">int</span> position, View convertView, ViewGroup parent) {</pre>

  <pre>    LayoutInflater inflater = (LayoutInflater) context</pre>

  <pre class="alt">            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);</pre>

  <pre>    View view;</pre>

  <pre class="alt">    <span class="kwrd">if</span> (convertView == <span class="kwrd">null</span>) {            </pre>

  <pre>        view = inflater.inflate(R.layout.list_item, parent, <span class="kwrd">false</span>);</pre>

  <pre class="alt">    }</pre>

  <pre>    <span class="kwrd">else</span></pre>

  <pre class="alt">        view = convertView;</pre>

  <pre>    TextView text1 = (TextView) view.findViewById(R.id.text1);</pre>

  <pre class="alt">    text1.setText(stringValues[position]);</pre>

  <pre>    LinearLayout layout_item = (LinearLayout) view.findViewById(R.id.layout_item);</pre>

  <pre class="alt">    <span class="rem">//Set the background and text color</span></pre>

  <pre>    <span class="kwrd">if</span> (position % 2 == 0) {</pre>

  <pre class="alt">        layout_item.setBackgroundColor(context.getResources().getColor(R.color.black));</pre>

  <pre>        text1.setTextColor(context.getResources().getColor(R.color.white));</pre>

  <pre class="alt">    } <span class="kwrd">else</span> {</pre>

  <pre>        layout_item.setBackgroundColor(context.getResources().getColor(R.color.white));</pre>

  <pre class="alt">        text1.setTextColor(context.getResources().getColor(R.color.black));</pre>

  <pre>    }                </pre>

  <pre class="alt">    <span class="kwrd">return</span> view;</pre>

  <pre>}</pre>
</div>

<p><style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>Now when you run your app you can scroll up and down all you want and the colors will be correct:</p>

<p><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="changing colors programatically" alt="changing colors programatically" src="http://chrisrisner.com/upload/android_day_twenty_coding_color_changes.png" width="211" height="218" /></p>

<p>&#160;</p>

<p><strong>Adding a header and footer</strong></p>

<p>Adding a header or footer to your <strong>ListView</strong> is very easy.&#160; You first need to create a new layout that you want to use for the header or the footer.&#160; Then in the <strong>onCreate</strong> method of your <strong>ListActivity </strong>(so in this case <strong>DayTwentyActivity</strong>) you need to inflate the layout and call <strong>addHeaderView </strong>or <strong>addFooterView </strong>on the <strong>ListView </strong>object.&#160; For example, if you had a header layout named <strong>second_layout</strong> you could add this to the <strong>onCreate </strong>method to add a header:</p>

<div class="csharpcode">
  <pre class="alt">ListView listView = getListView();</pre>

  <pre>View headerView = getLayoutInflater().inflate(R.layout.second_layout, <span class="kwrd">null</span>);</pre>

  <pre class="alt">listView.addHeaderView(headerView);        </pre>

  <pre>&#160;</pre>

  <pre class="alt">CustomArrayAdapter listAdapter = <span class="kwrd">new</span> CustomArrayAdapter(<span class="kwrd">this</span>, values);</pre>

  <pre>setListAdapter(listAdapter);        </pre>
</div>
<style type="text/css">
.csharpcode, .csharpcode pre
{
	font-size: small;
	color: black;
	font-family: consolas, "Courier New", courier, monospace;
	background-color: #ffffff;
	/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt 
{
	background-color: #f4f4f4;
	width: 100%;
	margin: 0em;
}
.csharpcode .lnum { color: #606060; }</style>

<p>The same is true for adding a footer.&#160; Now you should be able to use <strong>ListView</strong>s pretty effectively.</p>

<p><strong>A word about ListViews and ScrollViews</strong></p>

<p>It is possible to put a <strong>ListView</strong> inside of layout and not use a <strong>ListActivity</strong>.&#160; It’s almost certain that you’ll run into a scenario where you want to do this.&#160; Eventually you may also run into a situation where you start thinking about putting your <strong>ListView</strong> into a layout that uses a <strong>ScrollView</strong>.&#160; While <a title="How to put a ListView in a ScrollView" href="http://nex-otaku-en.blogspot.com/2010/12/android-put-listview-in-scrollview.html">possible</a>, all recommendations are to not do this.&#160; The <strong>ScrollView </strong>and the <strong>ListView</strong> compete for scrolling.&#160; </p>

<p>You can <a title="Android Day Twenty Final Code" href="http://chrisrisner.com/upload/DayTwentyFinal.zip">download the source code from today here</a>.</p>