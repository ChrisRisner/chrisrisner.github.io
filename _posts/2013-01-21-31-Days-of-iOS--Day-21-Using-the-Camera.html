---
layout: post
title: "31 Days of iOS: Day 21-Using the Camera"
date: Mon Jan 21 2013 05:20:00
commentsOn: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, iOS, XCode]
excerpt: "This is day 21 in the 31 Days of iOS.  This article focuses on how to use the camera in your iOS applications.  We'll talk about how to show the camera and process the results of a picture being chosen as well as how to check to see if the camera is available."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,camera,UIImagePickerControllerDelegate, UIImagePickerControllerSourceTypeCamera,UIImagePickerController,showCameraControls,isSourceTypeAvailable,How to develop iOS,iOS intro,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-21-31-Days-of-iOS--Day-21-Using-the-Camera.html
disqus_identifier: 31-Days-of-iOS--Day-21-Using-the-Camera
redirect_from:
  - /2013-01-21-31-Days-of-iOS--Day-21%E2%80%93Using-the-Camera/
  - /2013-01-21-31-Days-of-iOS--Day-21-Using-the-Camera/
  - /31-Days-of-iOS--Day-21-Using-the-Camera/
  - /31-Days-of-iOS--Day-21-Using-the-Camera
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 21 of the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; <a title="Day 20: Displaying Information with Maps" href="http://chrisrisner.com/31-Days-of-iOS--Day-20%E2%80%93Displaying-Information-on-Maps">Yesterday</a>, we wrapped up a two-article series on using maps in iOS applications.&#160; We’re going to continue on discussing how to make use of built-in features today by talking about using the Camera.&#160; One of the best known examples of an iOS app that uses the camera has to be Instagram and it’s also one of the most popular iOS apps (or was before the <a title="Instagram Terms of Service Fiasco" href="http://blog.instagram.com/post/38252135408/thank-you-and-were-listening">terms of service fiasco</a>).&#160; We probably won’t cover all of the information necessary to build the next Instagram, but we’ll talk about the basics today.&#160; We’ll be starting with a brand new project, but if you’d like to <a title="iOS Day 21" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyOne.zip">follow along with the completed code, you can access it here</a>.</p>  <p><strong>Creating our project and handling the UI</strong></p>  <p>Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application</strong> and name it <strong>DayTwentyOne</strong>:</p>  <p align="center"><img title="new project for iOS day 21" alt="new project for iOS day 21" src="http://storage.chrisrisner.com/images/31iosday21-new-project.jpg" width="442" height="373" /></p>  <p>Open up <strong>MainStoryboard.storyboard</strong> and let’s handle our initial UI.&#160; Drag a round rect button to the top and then place an image beneath it.&#160; When you’re done, the UI will look like this:</p>  <p align="center"><img title="Initial UI" alt="Inital UI" src="http://storage.chrisrisner.com/images/31iosday21-inital-ui.jpg" /></p>  <p>Now open the <strong>Assistant Editor</strong> in the top right of Xcode and <strong>control + click and drag</strong> from the button and image over to the view controller code behind.&#160; For the button you’ll want to create an action and for the image, an outlet.&#160; Before we switch away from our header file, we’ll also want to make the <strong>ViewController</strong> class implement <strong>UIImagePickerControllerDelegate</strong>.&#160; When we’re done, the header file will look like this:</p>  <p><script src="https://gist.github.com/4290602.js?file=ViewController.h"></script></p>  <p>Now we can implement the class.</p>  <p><strong>Using the camera</strong></p>  <p>Open up <strong>ViewController.m</strong>.&#160; We’ll implement the <strong>tappedUseCamera</strong> method first and make it bring up the camera.&#160; To do so, we create a new instance of <strong>UIImagePickerController</strong> and set it’s <strong>sourceType </strong>to <strong>UIImagePickerControllerSourceTypeCamera</strong>.&#160; Then after setting it’s <strong>delegate</strong> to the <strong>ViewController</strong> class (<strong>self</strong>) we can call <strong>presentViewController</strong> on self and pass in our <strong>UIImagePickerController</strong>:</p>  <p><script src="https://gist.github.com/4290602.js?file=tappedUseCamera1.m"></script></p>  <p>If you try to run the app right now in the simulator, it’s going to crash when you tap the button.&#160; The reason this happens is that the camera isn’t available on the simulator.&#160; We can prevent the crash by checking to see if the camera is an available source type before using it by calling the <strong>UIImagePickerController</strong>’s <strong>isSourceTypeAvailable</strong> method like this:</p>  <p><script src="https://gist.github.com/4290602.js?file=tappedUseCamera2.m"></script></p>  <p>In this situation, we’d probably want to do something different like show the user a button to pick from the gallery instead of using the camera but you should be able to handle that on your own.&#160; Now if you run your app in the simulator and tap the button, nothing will happen.&#160; For testing purposes, we’ll assume for the rest of the article that you have, and are testing on, a physical device with a camera.&#160; Switch the device you’re going to run from the simulator over a device using the drop down in the top left of Xcode:</p>  <p align="center"><img title="changing Xcode device selection" alt="changing Xcode device selection" src="http://storage.chrisrisner.com/images/31iosday21-device-selection.jpg" /></p>  <p>Once you’ve done that you can run your app.&#160; This wills start it up on the device. Tap the <strong>Use Camera</strong> button and you should see the camera come up on the screen:</p>  <p align="center"><img title="Camera on iPhone" alt="Camera on iPhone" src="http://storage.chrisrisner.com/images/31iosday21-using camera.jpg" width="228" height="342" /></p>  <p>As you can see, the default camera has buttons to turn on and off auto flash, flip the camera (if you have a front and rear facing camera), take a picture, and cancel.&#160; You can remove all of these buttons by setting the <strong>UIImagePickerController</strong> object’s <strong>showsCameraControls </strong>property to <strong>NO</strong>.&#160; However, if you do this, you’ll need to manually then put your own buttons on the camera (for the user to take a picture).&#160; This is done by setting the <strong>cameraOverlayView</strong> property on the <strong>UIImagePIckerController</strong>.&#160; Doing so requires you to create your own custom view.&#160; However, this enables you to let the user take multiple pictures, add filters, or anything else you might want to do.&#160; Returning to the camera, if you take a picture, you’ll then be presented with the photo preview page:</p>  <p align="center"><img title="iOS Photo Preview" alt="iOS Photo Preview" src="http://storage.chrisrisner.com/images/31iosday21-preview-image.jpg" width="210" height="315" /></p>  <p>Hitting <strong>Retake</strong> will take you back to the camera screen.&#160; Tapping <strong>Use</strong> will return to your app.&#160; However, nothing will happen.&#160; What we want to happen is for the image we took to appear on the screen where we put an image.&#160; To make this happen, we need to add the <strong>UIImagePickerControllerDelegate</strong>’s <strong>didFinishPickingMediaWithInfo</strong> method:</p>  <p><script src="https://gist.github.com/4290602.js?file=didFinishPickingMediaWithInfo.m"></script></p>  <p>The first thing we’ll do is pull the <strong>UIImagePickerControllerOriginImage</strong> property out of the <strong>NSDictionary </strong>that is sent into the method.&#160; This property is of the type <strong>UIImage</strong> which is what we can then use to set our <strong>imageView</strong>’s image property using <strong>setImage</strong>.&#160; Lastly, we have to call <strong>dismissViewControllerAnimated</strong> on the view controller.&#160; If we don’t do this, the preview won’t go away and our app won’t return (even though it returned on it’s own when we didn’t implement the method).&#160; Now when we run our app, take a picture, and approve it, we should see the image view set:</p>  <p align="center"><img title="Setting an image view" alt="Setting an image view" src="http://storage.chrisrisner.com/images/31iosday21-setting-image-view.jpg" width="214" height="321" /></p>  <p><strong>Conclusion</strong></p>  <p>Today we talked about the basics of using the camera.&#160; We saw how to present it to the user as well as how to pull the image data out after an image is taken and show it to the user in an image view.&#160; Lastly, we briefly touched on how you could hide the default controls and show your own.&#160; Using the lessons from the other articles in this series, you should be capable of creating another view to layer on top as the controls.&#160; You can <a title="iOS Day 21" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyOne.zip">download the completed code from today’s walkthrough here</a>.</p>