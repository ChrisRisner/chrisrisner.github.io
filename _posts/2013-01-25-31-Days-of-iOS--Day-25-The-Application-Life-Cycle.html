---
layout: post
title: "31 Days of iOS: Day 25-The Application Life Cycle"
date: Fri Jan 25 2013 08:36:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, XCode, iOS]
excerpt: "Day 25 in the 31 Days of iOS covers the application life cycle.  This reviews all of the methods that are fired on your AppDelegate during different events such as your app entering the background, returning from the background, becoming active, receiving memory warnings, and more."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,app,application,life cycle,didFinishLaunchingWithOptions,applicationDidBecomeActive,applicationWillResignActive,applicationDidEnterBackground, beginBackgroundTaskWithExpirationHandler,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-25-31-Days-of-iOS--Day-25-The-Application-Life-Cycle.html
disqus_identifier: 31-Days-of-iOS--Day-25–The-Application-Life-Cycle
redirect_from:
  - /2013-01-25-31-Days-of-iOS--Day-25%E2%80%93The-Application-Life-Cycle/
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 25 of the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; <a title="Day 24: The View Life Cycle" href="http://chrisrisner.com/31-Days-of-iOS--Day-24%E2%80%93The-View-Life-Cycle">Yesterday</a>, we talked about the different parts of the view controller life cycle.&#160; This included events that are called automatically on a view controller when it is loaded, shows up to the user, is switched to another view, and more.&#160; Today we’re going to jump from the view to the application and talk about the application life cycle.&#160; While you don’t really need to see the code today to understand what is happening, there will be a project available for download.&#160; We’ll be starting with a brand new project, but if you’d like to follow along with the <a title="iOS Day 25 source code" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyFive.zip">completed code, you can access it here</a>.</p>  <p><strong>Creating our project</strong></p>  <p>Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application </strong>and name it <strong>DayTwentyFive</strong>:</p>  <p align="center"><img title="new project for day 25" alt="new project for day 25" src="http://storage.chrisrisner.com/images/31iosday25-new-project.jpg" width="485" height="396" /></p>  <p>Since we’re really just going to be examining events on the application, we don’t need a UI for our project.&#160; </p>  <p><strong>Application load life cycle events</strong></p>  <p>Just from creating our application, we already have most of the app life cycle events present in our <strong>AppDelegate.m</strong>.&#160; Open that class and take a look.&#160; For the ease of seeing which methods are called in what order, I’ve added log statements to each method.&#160; When your app first runs, you’ll see that the first method fired is <strong>application: didFinishLaunchingWithOptions</strong>.&#160; This method is called one time when your application starts.&#160; Provided your application isn’t shut down by the user or the OS (and your app doesn’t die) this method won’t be called again.&#160; This is a great place for doing global initialization.&#160; Things like initializing singletons (for analytics) or registering for push notifications (which we’ll cover another day) are great candidates for this method.&#160; The next method that is called during launch is <strong>applicationDidBecomeActive</strong>.&#160; This method may be called more than once (as we’ll see) so you don’t necessarily want to do the same global initialization that you do in <strong>didFinishLaunchingWithOptions</strong>.&#160; Instead this is where you may want to start any background tasks you have (or unpause them if you previously paused them).&#160; You can also make calls to your UI to update it if necessary.&#160; This will become more important in just a moment.&#160; Let’s background our app by hitting the home key and then going back into our app to see what happens.</p>  <p><strong>Backgrounding and returning to your app</strong></p>  <p>When you hit the home key, the first method called is <strong>applicationWillResignActive</strong>.&#160; When this method is called you should begin to pause any tasks your application is running, disable timers, pause processing, end audio playback, etc.&#160; It’s important to note that this method is called whether the user hits the home key or if the app is interrupted by a phone call, for example.&#160; After this method, <strong>applicationDidEnterBackground</strong> will be called.&#160; In this method you should save any data important for restoring user state if the application is killed.&#160; Essentially, if the user then&#160; double taps home and kills your app, you won’t get a notification.&#160; When you return from this method, your application should have no problem being shut down or gracefully being reopened.&#160; It’s VERY important to note that you only get <em>about</em> <a title="5 second limit on backgrounding" href="http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html">5 seconds of processing time when applicationDidEnterBackground is called</a>.&#160; You can request additional time by using <strong>beginBackgroundTaskWithExpirationHandler</strong>.&#160; It’s critical to remember this because if you don’t return from the call to <strong>applicationDidEnterBackground</strong> fast enough, you’re app can be terminated.&#160; Now, double tap home and tap your app to relaunch it.</p>  <p>The first method called will be <strong>applicationWillEnterForeground</strong>.&#160; This method indicates that your app was previously in the background.&#160; If you stop anything when your app was backgrounded but didn’t fully kill it, you can restart it here.&#160; However, the <strong>applicationDidBecomeActive </strong>is called next.&#160; This means that you need to decide if you want to fully reinitialize things in <strong>DidBecomeActive</strong> or handle them in <strong>WillEnterForeground</strong>.&#160; </p>  <p>As I mentioned above, it’s important to know when <strong>applicationDidBecomeActive</strong> is called.&#160; This is because by default, your view controllers don’t receive an indicator when the app is backgrounded and then brought back into the foreground.&#160; You can, however, notify them from the <strong>applicationDidBecomeActive</strong> method.&#160; Additionally, you can look into <a title="Using NSNotificationCenter" href="http://stackoverflow.com/questions/3639859/handling-applicationdidbecomeactive">using NSNotificationCenter to request an update be sent to your view controller when the DidBecomeActive method is fired</a>.</p>  <p><strong>Other methods</strong></p>  <p>There are a few other methods I’ll mention briefly.&#160; The <strong>applicationDidReceiveMemoryWarning</strong> is called on your app when it is using too much memory.&#160; This is an indicator from the OS that you should release memory if possible.&#160; As pointed out yesterday (for the same method on the view controller), with the use of Automatic Reference Counting, you don’t directly deallocate your memory.&#160; However you should still be cognizant of this method being called as it may mean you should redesign how your app works and uses memory.&#160; Also there is a method called <strong>applicationWillTerminate</strong>.&#160; This method is supposed to be called when your app is terminated, however, people seem to differ on how and when it will actually be called.&#160; In practice, other life cycle methods will be called before this and are the appropriate place to handle app shut down tasks.&#160; Additionally, there are two methods for push notifications:&#160; <strong>application: didReceiveRemoteNotification</strong> and <strong>application: didReceiveLocalNotification</strong>.&#160; These methods will be discussed in more detail when we talk about push notifications.</p>  <p><strong>Conclusion</strong></p>  <p>Today we reviewed the application life cycle.&#160; Combined with yesterday’s review of the view controller life cycle, you should now have a good understanding of what events are fired at what points in time.&#160; It’s very important to make sure your apps are good iOS citizens and correctly shut down or pause things when your app goes into the background and spin back up correctly when relaunched or brought into the foreground.&#160; Also remember, users are probably going to expect to be in the same place if they recently used your app.&#160; This means being able to remember what screen they were on, what data they had entered, and more.&#160; Make sure you think about this when building your apps.&#160; You can <a title="iOS Day 25 source code" href="http://storage.chrisrisner.com/codesamples/iOSDayTwentyFive.zip">download the completed code from today’s walkthrough here</a>.</p>