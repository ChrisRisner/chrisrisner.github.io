---
layout: post
title: "1DevDay 2012"
date: Sat Nov 17 2012 18:32:00
commentsOn: true
status: publish
type: post
published: true
categories: [Azure, Conferences, Mobile Services, Objective-C, iOS, XCode]
excerpt: "This article provides links to my Windows Azure Mobile Services presentation from the 1DevDay Detroit 2012 conference."
logoUrl: null
keywords: Mobile Services,Windows Azure,Windows Azure Mobile Services,Azure,iOS,iOS SDK,iPhone,iPad,BAAS,Backend,Data,Authentication,Push Notifications
filepath: 2012-11-18-1DevDay-2012.html
disqus_identifier: 1DevDay-2012
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" title="1DevDay 2012" alt="1DevDay 2012" align="right" src="https://crcomcstorage.blob.core.windows.net/images/1devdaylogo.png" width="281" height="140" />Earlier today, I had the opportunity to speak at 1DevDay Detroit 2012.&#160; This event, which I also spoke at last year, highlights the developer community in the metro Detroit area.&#160; There were a lot of tremendous speakers and the keynotes by Ted Neward and Chad Fowler were both great.&#160; This year, I spoke on Windows Azure Mobile Services.&#160; There seems to be more and more mobile development going on in Detroit so my talk, which focused on connecting iOS apps to Mobile Services was spot on.&#160; The audience was very engaged and had several follow up questions.&#160; </p>  <p><strong>Slides and source code</strong></p>  <p>I wanted to make sure everyone had access to the slides and source code from my session so <a title="1DevDay Slide Deck" href="https://crcomcstorage.blob.core.windows.net/presentations/1devdayBuildingIOSappsWithWindowsAzureMobileServices.pptx">you can access the slide deck here</a>.&#160; As to the source code, things are slightly more complicated.&#160; Allowing you to download the source code is easy enough, however, you’ll still need to get a Windows Azure account, create a mobile service, set up the tables and the scripts.&#160; I’ll endeavor to help you do that here.&#160; First, you’ll need access to the source code.&#160; You can <a title="DevDay SourceCode" href="https://crcomcstorage.blob.core.windows.net/codesamples/devday.zip">download the completed source code here</a>.&#160; Once that is done, you’ll need to get a Windows Azure account and request access to mobile services.&#160; You can create a new <a title="Windows Azure Account" href="http://aka.ms/MobileServices-iOS-SDK">Windows Azure account here</a>.&#160; Remember that you will not be charged anything unless you manually remove the spending limit (which is set to ZERO by default).&#160; Once that is done, request access to Mobile Services and then set up a new mobile service.&#160; </p>  <p><strong>Creating a Twitter app</strong></p>  <p>Since our app requires Twitter authentication, you’ll need to create a new Twitter app.&#160; This requires a Twitter account (which you probably have).&#160; Log in and go to <a href="http://dev.twitter.com">http://dev.twitter.com</a>.&#160; Go to the top right and hover over your username until the drop down opens and you can go to <strong>My Applications</strong>.&#160; After that, click the <strong>Create a new application</strong> button.&#160; Fill out the form, using the link of your Mobile Service from the <strong>Dashboard</strong> tab in the portal (for example, in the session, the URL was <a title="https://devday.azure-mobile.net/" href="https://devday.azure-mobile.net/">https://devday.azure-mobile.net/</a>) for the <strong>Website</strong> and <strong>Callback URL</strong>.&#160; With that done, you will need to click the <strong>Manage Keys</strong> button at the bottom of the portal when in your mobile service’s dashboard and copy the URL from before and the <strong>ApplicationKey</strong> into the appropriate spots in <strong>TodoService.m</strong>.&#160; Just look for the <strong>mobileServicesURL </strong>and <strong>appkey</strong> strings in that file.&#160; </p>  <p><strong>Tables and scripts</strong></p>  <p>Return to the portal and go to the Data tab.&#160; We need to create a couple tables and set their scripts.&#160; First, create a table named <strong>TodoItem</strong> and set the permissions on its operations to <strong>Only Authenticated Users</strong>.&#160; Next, go to the <strong>Scripts</strong> tab for the table and set the <strong>Insert</strong> script to be:</p>  <p><script src="https://gist.github.com/4102931.js?file=inserttodoitem.js"></script></p>  <p>Now save that and switch to the <strong>Read</strong> script.&#160; Put this JavaScript in for the <strong>Read</strong> operation:</p>  <p><script src="https://gist.github.com/4102931.js?file=readtodoitem.js"></script></p>  <p>Next, we just need to create another table.&#160; Name this table <strong>ApnsToken </strong>and leave it’s permissions as is.&#160; </p>  <p><strong>Handling certs and profiles</strong></p>  <p>Unfortunately, this is the part that is truly complicated.&#160; You need to log into the <a title="Apple Developer portal" href="https://developer.apple.com/">Apple developer portal</a> (which means you need an Apple iOS dev account) and create a new <strong>Application ID</strong> and then set it up for push notifications.&#160; You’ll then need a new <strong>Provisioning Profile</strong> which is tied to this <strong>App Id</strong>.&#160; After this is done, you’ll need to set your App’s <strong>Bundle Identifier </strong>to the same one set up with your <strong>App Id</strong> (for example, I created one named <strong>cmr.MobileServices.Quickstart</strong> to easily match up with the name of the Target.&#160; You may want to use XXX.MobileServices.Quickstart).&#160; This change can be made by selecting your project in the <strong>Project Navigator</strong> on the left side of Xcode and changing the <strong>Bundle Identifier.</strong> You’ll also need to change to change the <strong>Code Signing Identity </strong>in the <strong>Build Settings </strong>of the <strong>Target</strong> to your new provisioning profile.&#160; I’ve definitely glazed over details and left out screenshots here so if you need more assistance here, comment on the article or use the contact form to let me know.&#160; </p>  <p><strong>Setting your push certificate</strong></p>  <p>Before we can run our app, we need to do one more thing.&#160; In the Apple dev portal, download the certificate for your app’s push notifications.&#160; After downloading it, open the file which should cause the <strong>Keychain Access</strong> app to open.&#160; From here, you should be able to export that certificate as a <strong>p12 </strong>file.&#160; After that, go to the <strong>Push</strong> tab in the portal and under <strong>apple push notification settings</strong>, click the <strong>Upload </strong>button.&#160; Browse and find the <strong>p12 </strong>file and make sure <strong>DEB</strong> is selected for the <strong>Mode</strong>.&#160; Click the check mark in the bottom right and you should be good to proceed.</p>  <p><strong>Run it</strong></p>  <p>After all this you should be able to run the app.&#160; Keep in mind you’ll need to run the app on a device to get push notifications.&#160; Also, if the app is running on the device, you won’t see anything on the screen to signify a push.&#160; You should see something in the logs.&#160; Conversely if the app isn’t open on the device when a push is received, you will then see the notification at the top of your device’s screen.&#160; I’d like to thank everyone that attended and invite anyone with questions or issues to contact me.</p>