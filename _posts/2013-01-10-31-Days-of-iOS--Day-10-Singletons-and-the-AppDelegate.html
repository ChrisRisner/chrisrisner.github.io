---
layout: post
title: "31 Days of iOS: Day 10-Singletons and the AppDelegate"
date: Thu Jan 10 2013 07:06:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, iOS, XCode]
excerpt: "This is day 10 in the 31 Days of iOS.  In it we cover what the AppDelegate is and how to use it to store global properties.  We also review an additional manner of doing this by creating a custom singleton class."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,singleton,appdelegate,UIApplication,sharedApplication,How to develop iOS,iOS intro,iOS Introduction,iOS Tutorial,iOS for Beginners,Beginners,walkthrough
filepath: 2013-01-10-31-Days-of-iOS--Day-10-Singletons-and-the-AppDelegate.html
disqus_identifier: 31-Days-of-iOS--Day-10–Singletons-and-the-AppDelegate
redirect_from:
  - /2013-01-10-31-Days-of-iOS--Day-10%E2%80%93Singletons-and-the-AppDelegate/
  - /2013-01-10-31-Days-of-iOS--Day-10–Singletons-and-the-AppDelegate/
---
<p align="left"><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 10 in the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; Today we’re going to start a subset of articles that deal with data.&#160; We’ll start by focusing on how to share data across different areas of an application and finish by looking at ways to persist data to the device.&#160; Today we’ll discuss how to keep data in a global scope.&#160; This means you won’t have to pass data back and forth between different areas of your application.&#160; We’re going to look at two techniques for solving this problem:&#160; the AppDelegate and Singletons.&#160; We’ll be starting with a brand new project, but if you’d like to follow along with the completed code, <a title="Day 10 iOS Source Code" href="https://crcomcstorage.blob.core.windows.net/codesamples/DayTen.zip">you can access it here</a>.</p>  <p align="left"><strong>Creating our project and handling the UI</strong></p>  <p align="left">Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>. We’ll use a <strong>Single View Application</strong> and name it <strong>DayTen</strong>:</p>  <p align="center"><img title="Day 10 App" alt="Day 10 App" src="https://crcomcstorage.blob.core.windows.net/images/31iosday10-new-app.jpg" width="447" height="369" /></p>  <p align="left">Let’s start by putting some simple controls on our UI for testing.&#160; Open <strong>MainStoryboard.storyboard</strong> and drop two <strong>Round Rect Buttons</strong> and a <strong>Label</strong> on the view.&#160; When you’re done, your app will look like this:</p>  <p align="center"><img title="Day 10 UI" alt="Day 10 UI" src="https://crcomcstorage.blob.core.windows.net/images/31iosday10-ui.jpg" width="270" height="247" /></p>  <p align="left">Once that is done, open the <strong>Assistant Editor </strong>in the <strong>Utilities </strong>panel on the right side.&#160; <strong>Control + Click and drag</strong> from the buttons to your <strong>View Controller</strong> and create actions for them.&#160; Do the same for the label and create an outlet.&#160; When you’re done your code will look like this:</p>  <p align="left"><script src="https://gist.github.com/3983381.js?file=ViewController.h"></script></p>  <p align="left">Now that our UI is done, let’s look at the first way we can handle keeping data globally available.</p>  <p align="left"><strong>Using the AppDelegate</strong></p>  <p>The first method we’re going to take a look at for storing data globally is going to use something that is already in your application’s source code: the <strong>AppDelegate</strong>.&#160; The <strong>AppDelegate</strong> is sort of like the entry point for your application.&#160; It implements <strong>UIApplicationDelegate</strong> and contains methods that are called when your application launches, when is going to the background (i.e. when you hit the home key), when it’s opened back up, and more.&#160; The <strong>AppDelegate</strong> object is stored as a property on the <strong>UIApplication </strong>class and is accessible from anywhere in your objective-C classes.&#160; The header and implementation file for your <strong>AppDelegate</strong> is generated when you create your project and you don’t have to make any modifications for it to work.&#160; However, that doesn’t mean we can’t make changes and make use of the <strong>AppDelegate</strong>.&#160; We’re going to keep this simple and just add a new <strong>NSString</strong> property to the delegate:</p>  <p><script src="https://gist.github.com/3983381.js?file=AppDelegate1.h"></script></p>  <p>Now we just need to pull out the <strong>AppDelegate </strong>in our view controller and access this property.&#160; Switch over to <strong>ViewController.m</strong>.&#160; The first thing you need to do is import the <strong>AppDelegate </strong>header in your class:</p>  <blockquote>   <p>#import &quot;AppDelegate.h&quot;</p> </blockquote>  <p>With that done, you can now access the delegate.&#160; We’re going to use it to store a string in the <strong>info</strong> property when the <strong>Save Data</strong> button is tapped and pull that data back out to set the label when <strong>Load Data</strong> is tapped:</p>  <p><script src="https://gist.github.com/3983381.js?file=ViewController1.m"></script></p>  <p>Here we’re using the <strong>sharedApplication </strong>message on the <strong>UIApplication</strong> object and then getting the delegate property from that.&#160; Once that is done we can access any properties on <strong>AppDelegate</strong> or pass any messages to it we need to.&#160; Let’s add two methods to the <strong>AppDelegate</strong> and use them to wrap our access to the property:</p>  <p><script src="https://gist.github.com/3983381.js?file=AppDelegate2.h"></script></p>  <p>Now let’s implement these in <strong>AppDelegate.m</strong>: </p>  <p><script src="https://gist.github.com/3983381.js?file=AppDelegate1.m"></script></p>  <p>These methods are just setting and getting the info property. If we wanted to have any custom validation we could add it here.&#160; Our <strong>ViewController.m</strong> is then changed to send messages to the <strong>delegate</strong> object instead of accessing the property directly:</p>  <p><script src="https://gist.github.com/3983381.js?file=ViewController2.m"></script></p>  <p>That’s all there is to storing global data, or functionality, on the <strong>AppDelegate</strong>.</p>  <p><strong>Creating a Singleton</strong></p>  <p>We’re going to look at a similar approach to the <strong>AppDelgate</strong> now.&#160; Instead of putting properties and methods on the delegate, we’ll instead create a <a title="The Singleton Pattern" href="http://en.wikipedia.org/wiki/Singleton_pattern">Singleton</a> object.&#160; If you aren’t familiar with singletons, what you need to know is that they are an object where it’s ensured that there is only one instance of it ever in existence.&#160; So if you access the singleton from two different classes, they’ll always be accessing the same object.&#160; Let’s add a new objective-C class named <strong>MySingleton</strong> and implement the header like this:</p>  <p><script src="https://gist.github.com/3983381.js?file=MySingleton.h"></script></p>  <p>The same methods we had on the <strong>AppDelegate</strong> are here for getting the string in and returning the string.&#160; The new thing here is an <strong>class method</strong> which means you don’t need an instance of the class to call it.&#160; Calling <strong>getInstance</strong> should return the one single instance of our <strong>MySingleton</strong> class.&#160; Hopping over to <strong>MySingleton.m</strong>, we see the same implementation of the get and set methods:</p>  <p><script src="https://gist.github.com/3983381.js?file=MySingleton.m"></script></p>  <p>In the <strong>getInstance </strong>method, we are checking to see if the static <strong>MySingleton</strong> object is nil and if it is, we instantiate a new one.&#160; Then the instance is returned.&#160; This is how we insure that only one instance of <strong>MySingleton </strong>is created.&#160; Any one that wants to use the singleton then just calls <strong>getInstance </strong>to have access to it.&#160; After you’ve added an <strong>import</strong> statement for <strong>MySingleton.h</strong> to <strong>ViewController.m</strong> we can change our methods to use the singleton:</p>  <p><script src="https://gist.github.com/3983381.js?file=ViewController3.m"></script></p>  <p>Here we call <strong>getInstance </strong>and get the <strong>MySingleton</strong> object instead of getting the <strong>AppDelegate</strong>.&#160; After that we’re calling the methods the same way we did before.&#160; </p>  <p><strong>Why two ways?</strong></p>  <p>You may be wondering why I’ve shown you two similar ways to accomplish what is more or less the same thing.&#160; Some people feel that it’s improper to dirty your <strong>AppDelegate</strong> object to store global variables and logic and that you should instead always use the singleton pattern for this sort of thing.&#160; From a separation of code stand point, I would agree and think that makes sense.&#160; As far as I’m aware, there aren’t any performance issues with doing it one way over another.&#160; I usually follow the thinking of if I’m just knocking out something quick, I’ll use the <strong>AppDelegate</strong> as it’s faster to implement.&#160; If I’m building a serious application, I would choose the singleton pattern.&#160; You can find the <a title="iOS Day 10 Zip" href="https://crcomcstorage.blob.core.windows.net/codesamples/DayTen.zip">finished source code for today’s article here</a>.</p>