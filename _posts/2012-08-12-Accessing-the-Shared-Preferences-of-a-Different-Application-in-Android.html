---
layout: post
title: "Accessing the Shared Preferences of a Different Application in Android"
date: Sat Aug 11 2012 19:12:00
commentsOn: true
status: publish
type: post
published: true
categories: [Android, Java, Mobile]
excerpt: "This article will demonstrate how to read shared preferences created by one Android application in a different Android app.  This requires that the app creating them specifies that they are world readable using the MODE_WORLD_READABLE flag on Context.  "
logoUrl: null
keywords: Android,shared preferences,Sharing Shared Preferences between Apps,Multiple Android Apps,MODE_WORLD_READABLE,MODE_WORLD_WRITABLE
filepath: 2012-08-12-Accessing-the-Shared-Preferences-of-a-Different-Application-in-Android.html
disqus_identifier: Accessing-the-Shared-Preferences-of-a-Different-Application-in-Android
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/android-200.png" />A while back, I wrote about <a title="Shared Preferences in Android" href="http://chrisrisner.com/31-Days-of-Android--Day-22%E2%80%93Shared-Preferences">using shared preferences in Android</a>.&#160; Recently, one person <a title="Comment on Android Shared Preferences" href="http://chrisrisner.com/31-Days-of-Android--Day-22%E2%80%93Shared-Preferences#comment-612295007">commented</a> on that post saying that they weren’t able to access the shared preferences of one application from another using the MODE_WORLD_READABLE or MODE_WORLD_WRITEABLE flags and would like to see some sample code.&#160; I decided to put something together really quick to demonstrate this in action.&#160; </p>  <p><strong>What are Shared Preferences</strong></p>  <p>Just to recap things, shared preferences are a way to store simple key value pairs for an application.&#160; These bits of data are persisted across starting and stopping the app.&#160; The user does have the ability to remove them by clearing the app’s data (available in the settings) but under normal circumstances, if you commit a change to the shared preferences when the app is running, it will be there the next time the app loads.&#160; For an example of something you might store in shared preferences, let’s consider if when your app runs, it first presents a login dialog (username and password) to the user.&#160; You might want to store the user’s username in shared prefs so that the next time the app runs, their name is already filled out and they only need to enter the password.&#160; </p>  <p><strong>Writing a Preference so it’s Available in Other Apps</strong></p>  <p>Writing e preference so it’s readable by other apps is actually very simple.&#160; In fact, the only difference between writing “private” shared prefs and ones readable by other apps is the mode you use when getting a reference to the shared prefs.</p>  <p><script src="https://gist.github.com/3328829.js?file=SettingPreference.java"></script></p>  <p>Here, we’re using <strong>Context.MODE_WORLD_READABLE</strong> for the mode when fetching the shared prefs.&#160; This set’s the file that is generated to store these preferences to be readable by any application.&#160; With that done, we’re just putting a String extra in preferences just like any other preference we might store.</p>  <p><strong>Reading a Preference from another App</strong></p>  <p>This is where things get a little more tricky.&#160; Prior to getting a reference to shared prefs, we need to generate a context which points to the app that generated the shared preference.&#160; So, let’s pretend that the app above that saved the shared preference had the package name “<strong>com.cr.sharedprefexampleone</strong>”, we would need a reference to that app’s context.&#160; </p>  <p><script src="https://gist.github.com/3328829.js?file=GettingPreference.java"></script></p>  <p>Here we get a context for the first app and use the <strong>Context.MODE_WORLD_WRITEABLE </strong>mode for the context.&#160; Then, we use that context to get the reference to shared preferences with the <strong>Context.MODE_WORLD_READABLE</strong> mode. With that done, we can extract our String extra just like if it had been generated by the second app.&#160; </p>  <p><strong>Conclusion</strong></p>  <p>While a powerful ability if you’re releasing several apps, this may not be the best way to share data and isn’t without risk.&#160; Doing this means that any app is able to read your shared preferences.&#160; If this is how you’re going to share data, you may want to look into the <strong>sharedUserId</strong> attribute in your AppManifest.&#160; You can <a title="Sharing Shared Preferences in Android Apps Source Code" href="http://chrisrisner.com/upload/SharedPrefSharingExample.zip">download sample code with two apps that perform the above here</a>.</p>