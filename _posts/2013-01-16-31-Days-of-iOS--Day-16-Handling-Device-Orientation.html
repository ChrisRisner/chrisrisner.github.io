---
layout: post
title: "31 Days of iOS: Day 16-Handling Device Orientation"
date: Wed Jan 16 2013 09:01:00 GMT-0800 (PST)
comments: true
status: publish
type: post
published: true
categories: [Mobile, Objective-C, XCode, iOS]
excerpt: "This is day 16 in the 31 Days of iOS.  In this article we talk about the different orientations that an app can have (primarily landscape and portrait), how to detect the current orientation or when the orientation changes, and how to restrict the allowed orientations."
logoUrl: null
keywords: iOS,31 days of iOS,Apple,Apple iOS,orientation,willRotateToInterfaceOrientation,UIInterfaceOrientation,statusBarOrientation,shouldAutoRotate,supportedInterfaceOrientations,UIInterfaceOrientationMaskAll,supported orientations,iOS Tutorial,Beginners,walkthrough
filepath: 2013-01-16-31-Days-of-iOS--Day-16-Handling-Device-Orientation.html
disqus_identifier: 31-Days-of-iOS--Day-16–Handling-Device-Orientation
redirect_from:
  - /2013-01-16-31-Days-of-iOS--Day-16%E2%80%93Handling-Device-Orientation/
  - /2013-01-16-31-Days-of-iOS--Day-16–Handling-Device-Orientation/
  - /31-Days-of-iOS--Day-16–Handling-Device-Orientation/
---
<p><img style="margin: 0px 0px 5px 5px; display: inline; float: right" align="right" src="http://chrisrisner.com/upload/200px-Apple-logo.png" width="170" height="208" />Welcome to Day 16 of the <a title="31 Days of iOS" href="http://chrisrisner.com/31-Days-of-iOS">31 Days of iOS</a>.&#160; <a title="Day 15: Connecting to Built-In Apps" href="http://chrisrisner.com/31-Days-of-iOS--Day-15%E2%80%93Connecting-to-Built-in-Apps">Yesterday</a>, we went over how to connect to some of the built in functionality of iOS:&#160; opening websites in Safari, pulling up the email composer, tweeting through Twitter, and more.&#160; Today we’re going to cover an important topic:&#160; device orientation.&#160; Whether you’re developing for an iPhone or an iPad, you need to know how to use the room you have on the screen to the best of your ability.&#160; This means knowing how to change things if the orientation goes from portrait to landscape, or how to prevent anything from changing when this occurs.&#160; We’ll be starting with a brand new project, but if you’d like to <a title="iOS day 16 source code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDaySixteen.zip">follow along with the completed code, you can access it here</a>.</p>  <p><strong>Creating our project and handling the UI</strong></p>  <p>Open up Xcode and choose <strong>File</strong>, <strong>New</strong>, <strong>Project</strong>.&#160; We’ll use a <strong>Single View Application </strong>and name it <strong>DaySixteen</strong>:</p>  <p align="center"><img title="Day 16 new project" alt="Day 16 new project" src="https://crcomcstorage.blob.core.windows.net/images/31iosday16-new-project.jpg" width="476" height="395" /></p>  <p>Next, open up the <strong>MainStoryboard.storyboard</strong> file.&#160; We’re only going to add a single label to the top of our view for now.&#160; Once you’ve done that your view should look like this:</p>  <p align="center"><img title="Day 16 UI" alt="Day 16 UI" src="https://crcomcstorage.blob.core.windows.net/images/31iosday16-ui.jpg" width="232" height="208" /></p>  <p>Next open the <strong>Assistant Edtior </strong>in the top right of the <strong>Utilities pane </strong>and <strong>control + click and drag</strong> from the label to the header file to create a outlet.&#160; When you’re done, the <strong>ViewController.h </strong>file will look like this:</p>  <p><script src="https://gist.github.com/4123116.js?file=ViewController.h"></script></p>  <p>Now run your app.&#160; When the simulator first starts, it is in portrait mode.&#160; In order to switch the orientation of the simulator (with a device, just rotate it!) tap <strong>command</strong> and either <strong>LEFT </strong>or <strong>RIGHT</strong>.&#160; You should see the label stay at the top center in both orientations:</p>  <p align="center"><img title="Changing orientations" alt="Changing orientations" src="https://crcomcstorage.blob.core.windows.net/images/31iosday16-first-run.jpg" width="440" height="303" /></p>  <p>I’ve added the <strong>LANDSCAPE</strong> and <strong>PORTRAIT</strong> text just so you can see which is which for now.&#160; Soon we’ll set that text to the labels.&#160; If you rotate twice in one direction so the device is “upside-down” you’ll notice that the orientation of your app doesn’t change to be “upside-down” as well:</p>  <p align="center"><img title="Upside down simulator" alt="Upside down simulator" src="https://crcomcstorage.blob.core.windows.net/images/31iosday16-upside-down.jpg" width="226" height="241" /></p>  <p>We’ll go over why this is happening soon.</p>  <p><strong>Detecting orientation changes</strong></p>  <p>Thankfully, detecting an orientation change is very easy in iOS.&#160; Even easier so since the release of iOS6.&#160; Prior to iOS6, you needed to override the <strong>shouldAutorotateToInterfaceOrientation</strong> method.&#160; In this method, developers were able to decide if a view controller would allow it’s contents to be rotated based off of whatever logic they wanted.&#160; As of iOS6 this method has been depreciated though.&#160; Instead there are a few other methods we can use.&#160; The first we’re going to look at is <strong>willRotateToInterfaceOrientation</strong>.&#160; This method will be called right before the orientation actually starts changing.&#160; Right now we’ll just change the text on the label to indicate the current orientation:</p>  <p><script src="https://gist.github.com/4123116.js?file=willRotateToInterfaceOrientation.m"></script></p>  <p>Now when you run your app, each time you change the orientation, the text will change.&#160; To get a better view into when the method is called and the label is changed, go to the simulator and go to the <strong>Debug</strong> menu and choose <strong>Toggle Slow Animations</strong>.&#160; After this is done and you rotate the simulator, you’ll see that the text of the label is changed before the view is rotated.&#160; When we first run the app, the label isn’t showing the orientation until after you’ve changed the orientation.&#160; We’ll tackle that next.</p>  <p><strong>Getting the current orientation</strong></p>  <p>To access the current orientation we get the <strong>sharedApplication</strong> property from <strong>UIApplication</strong> and pull it’s <strong>statusBarOrientation</strong> property.&#160; We can then use the same code we had before to set the text on view load:</p>  <p><script src="https://gist.github.com/4123116.js?file=viewDidLoad.m"></script></p>  <p>Now when you run your app, you’ll see that the orientation show up as the label right away.&#160; You can use this property to get the current orientation at any point in time.</p>  <p><strong>Restricting orientation changes programmatically</strong></p>  <p>At some points, you may want to prevent your app from rotating programmatically.&#160; This can be done with the <strong>shouldAutorotate </strong>method.&#160; If we override that method like this:</p>  <p><script src="https://gist.github.com/4123116.js?file=shouldAutorotate.m"></script></p>  <p>Then our view will never rotate.&#160; This method of restricting things might be useful if there is some logical reason in your code behind to prevent rotation.</p>  <p><strong>Another way to restrict orientation changes</strong></p>  <p>Another way to restrict orientation changes is to specify which orientations are allowed by implementing the <strong>supportedInterfaceOrientations</strong> method.&#160; This allows you to programmatically declare which orientations are allowed.&#160; For example, if we wanted to only allow portrait and landscape left, then we could implement the method like this:</p>  <p><script src="https://gist.github.com/ChrisRisner/4123116.js?file=supportedInterfaceOrientations.m"></script></p>  <p>You don’t have to implement this method if you don’t want to.&#160; If you wanted to allow any orientation though, you could return <strong>UIInterfaceOrientationMaskAll</strong>.</p>  <p><strong>Changing the supported orientations on the target</strong></p>  <p>We can also define the supported orientations across the whole application by opening the project file and going to the <strong>Summary</strong>.&#160; Inside of that under the <strong>iPhone / iPad Deployment Info </strong>is a section entitled <strong>Supported Interface Orientations</strong>:</p>  <p align="center"><img title="Supported Interface Orienations" alt="Supported Interface Orienations" src="https://crcomcstorage.blob.core.windows.net/images/31iosday16-supported-interface.jpg" /></p>  <p>Remember that this will set the supported orientations across the application.&#160; if you have some views that need to support an orientation that others won’t, you’ll need to allow them here and then restrict them in the code using the methods described above.</p>  <p><strong>Conclusion</strong></p>  <p>Today we looked at several methods of detecting and controlling orientation changes in your iOS applications.&#160; As you experiment more with your applications, and others, you’ll see scenarios where preventing an orientation makes sense.&#160; For example, many games only run in landscape mode.&#160; You can <a title="iOS day 16 source code" href="https://crcomcstorage.blob.core.windows.net/codesamples/iOSDaySixteen.zip">access the finished source code from today here</a>.</p>